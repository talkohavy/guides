"use strict";(self.webpackChunkdocusaurus_guides=self.webpackChunkdocusaurus_guides||[]).push([[144],{9183:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var s=o(6070),i=o(5710);const t={},r="MongoDB",a={id:"programming/mongodb",title:"MongoDB",description:"1. How to Query in MongoDB",source:"@site/docs/programming/mongodb.md",sourceDirName:"programming",slug:"/programming/mongodb",permalink:"/guides/docs/programming/mongodb",draft:!1,unlisted:!1,editUrl:"https://github.com/talkohavy/guides/docs/programming/mongodb.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"- Micro-Frontends",permalink:"/guides/docs/programming/micro-frontends"},next:{title:"- NestJS",permalink:"/guides/docs/programming/nest"}},l={},d=[{value:"1. How to Query in MongoDB",id:"1-how-to-query-in-mongodb",level:2},{value:"- A: Using MQL",id:"--a-using-mql",level:3},{value:"- Command 1: return the document with the MAX/MIN HIGHEST SCORE",id:"--command-1-return-the-document-with-the-maxmin-highest-score",level:4},{value:"- Command 2: return only the records which FIELD DOES/DOESN&#39;T EXISTS",id:"--command-2-return-only-the-records-which-field-doesdoesnt-exists",level:4},{value:"- Command 3: Does a field exist, is of type array, and ARRAY CONTAINS AT LEAST ONE ELEMENT?",id:"--command-3-does-a-field-exist-is-of-type-array-and-array-contains-at-least-one-element",level:4},{value:"- Command 4: COUNT HOW MANY records are there that answer QUERY",id:"--command-4-count-how-many-records-are-there-that-answer-query",level:4},{value:"- Command 5: return documents which FIELD_NAME IS NOT EQUAL TO some value",id:"--command-5-return-documents-which-field_name-is-not-equal-to-some-value",level:4},{value:"- Command 6: return documents and PROJECT ONLY SOME FIELDS",id:"--command-6-return-documents-and-project-only-some-fields",level:4},{value:"- B: Using Aggregation Pipelines",id:"--b-using-aggregation-pipelines",level:3},{value:"- Command 1: ???",id:"--command-1-",level:4},{value:"2. How to Update in MongoDB",id:"2-how-to-update-in-mongodb",level:2},{value:"- A: Using MQL",id:"--a-using-mql-1",level:3},{value:"- Command 1: ADD NEW FIELD to 1 |some | all documents",id:"--command-1-add-new-field-to-1-some--all-documents",level:4},{value:"- Command 2: DELETE AN EXISTING FIELD from all (similar to MySql&#39;s DROP COLUMN)",id:"--command-2-delete-an-existing-field-from-all-similar-to-mysqls-drop-column",level:4},{value:"- Command 3: ADD SUB-DOCUMENT TO ARRAY field",id:"--command-3-add-sub-document-to-array-field",level:4},{value:"- Command 4: DELETE SUB-DOCUMENT FROM ARRAY field",id:"--command-4-delete-sub-document-from-array-field",level:4},{value:"- B: Using Aggregation Pipelines",id:"--b-using-aggregation-pipelines-1",level:3},{value:"- Command 1: Set field equal to another field",id:"--command-1-set-field-equal-to-another-field",level:4},{value:"- Command 2: Unset a field",id:"--command-2-unset-a-field",level:4},{value:"- Command 3: Update a specific object inside an array field",id:"--command-3-update-a-specific-object-inside-an-array-field",level:4},{value:"3. Connect to Remote Server",id:"3-connect-to-remote-server",level:2},{value:"4. Connect to a local server",id:"4-connect-to-a-local-server",level:2},{value:"5. Useful shell commands",id:"5-useful-shell-commands",level:2},{value:"- command 1: show all existing databases",id:"--command-1-show-all-existing-databases",level:3},{value:"- command 2: use",id:"--command-2-use",level:3},{value:"- command 3: show collections",id:"--command-3-show-collections",level:3},{value:"- command 4: find()",id:"--command-4-find",level:3},{value:"- command 5: findOne(query)",id:"--command-5-findonequery",level:3},{value:"- command 6: count()",id:"--command-6-count",level:3},{value:"- command 7: pretty()",id:"--command-7-pretty",level:3},{value:"- command 8: insert one or more documents",id:"--command-8-insert-one-or-more-documents",level:3},{value:"- command 9: update one or more documents",id:"--command-9-update-one-or-more-documents",level:3},{value:"- command 10: delete one or more field-value pair",id:"--command-10-delete-one-or-more-field-value-pair",level:3},{value:"- command 11: delete one or more documents",id:"--command-11-delete-one-or-more-documents",level:3},{value:"- command 12: delete one collection",id:"--command-12-delete-one-collection",level:3},{value:"6. Importing &amp; Exporting Backups",id:"6-importing--exporting-backups",level:2},{value:"- TLDR;",id:"--tldr",level:3},{value:"- Full Explanation",id:"--full-explanation",level:3},{value:"- Action 1: mongodump",id:"--action-1-mongodump",level:4},{value:"-- Action 2: mongoexport",id:"---action-2-mongoexport",level:4},{value:"-- Action 3: mongorestore",id:"---action-3-mongorestore",level:4},{value:"-- Action 4: mongoimport",id:"---action-4-mongoimport",level:4}];function c(e){const n={admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"mongodb",children:"MongoDB"}),"\n",(0,s.jsx)(n.h2,{id:"1-how-to-query-in-mongodb",children:"1. How to Query in MongoDB"}),"\n",(0,s.jsx)(n.h3,{id:"--a-using-mql",children:"- A: Using MQL"}),"\n",(0,s.jsx)(n.h4,{id:"--command-1-return-the-document-with-the-maxmin-highest-score",children:"- Command 1: return the document with the MAX/MIN HIGHEST SCORE"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.users.find({},{ _id: 0, userID: 1}).sort({"userID": -1}).limit(1);\n'})}),"\n",(0,s.jsx)(n.h4,{id:"--command-2-return-only-the-records-which-field-doesdoesnt-exists",children:"- Command 2: return only the records which FIELD DOES/DOESN'T EXISTS"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.find({ myField: { $exists : true } });\n"})}),"\n",(0,s.jsx)(n.h4,{id:"--command-3-does-a-field-exist-is-of-type-array-and-array-contains-at-least-one-element",children:"- Command 3: Does a field exist, is of type array, and ARRAY CONTAINS AT LEAST ONE ELEMENT?"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"{ myArray : { $elemMatch : { $exists : true } } }\n"})}),"\n",(0,s.jsx)(n.h4,{id:"--command-4-count-how-many-records-are-there-that-answer-query",children:"- Command 4: COUNT HOW MANY records are there that answer QUERY"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.find({ QUERY }).count();\n"})}),"\n",(0,s.jsx)(n.h4,{id:"--command-5-return-documents-which-field_name-is-not-equal-to-some-value",children:"- Command 5: return documents which FIELD_NAME IS NOT EQUAL TO some value"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.find({ userID: { $ne: 1 }});\n"})}),"\n",(0,s.jsx)(n.h4,{id:"--command-6-return-documents-and-project-only-some-fields",children:"- Command 6: return documents and PROJECT ONLY SOME FIELDS"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.find({} , { _id: 0, userID: 1, nickname: 1, email: 1 });\n"})}),"\n",(0,s.jsx)(n.h3,{id:"--b-using-aggregation-pipelines",children:"- B: Using Aggregation Pipelines"}),"\n",(0,s.jsxs)(n.p,{children:["When you ",(0,s.jsx)(n.strong,{children:"NEED"})," to use other fields values as reference, you can use an aggregation pipeline MQL update operations. Though their names are the same (like $set and $unset), they work differently when inside a regular update or an aggregation pipeline update."]}),"\n",(0,s.jsx)(n.h4,{id:"--command-1-",children:"- Command 1: ???"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"___\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-how-to-update-in-mongodb",children:"2. How to Update in MongoDB"}),"\n",(0,s.jsx)(n.h3,{id:"--a-using-mql-1",children:"- A: Using MQL"}),"\n",(0,s.jsx)(n.p,{children:"When you don't want to use other fields values as reference, you can use this simple MQL operations, that don't include an aggregation pipeline."}),"\n",(0,s.jsx)(n.h4,{id:"--command-1-add-new-field-to-1-some--all-documents",children:"- Command 1: ADD NEW FIELD to 1 |some | all documents"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.users.updateMany( { } ,{ $set: { newField: "defaultValue" } } )\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Side note: if the field already exists? It overrides its contents."})}),"\n",(0,s.jsx)(n.h4,{id:"--command-2-delete-an-existing-field-from-all-similar-to-mysqls-drop-column",children:"- Command 2: DELETE AN EXISTING FIELD from all (similar to MySql's DROP COLUMN)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.grades.updateMany( { studentID: 1 , classID: 460 } , { $unset: { arr1: "" , arr2: "" } } )\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Side note: if the field doesn't exist? updateMany does nothing."})}),"\n",(0,s.jsx)(n.h4,{id:"--command-3-add-sub-document-to-array-field",children:"- Command 3: ADD SUB-DOCUMENT TO ARRAY field"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.updateMany( { userID: 1 } , { $addToSet: { iWatched: { userID:306, \u2026values } } } )\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Side note: the $addToSet doesn't really apply to an array containing sub-documents, in the sense that it will allow inserting a new sub-document with the same values."})}),"\n",(0,s.jsx)(n.h4,{id:"--command-4-delete-sub-document-from-array-field",children:"- Command 4: DELETE SUB-DOCUMENT FROM ARRAY field"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.updateMany( { userID: 1 } , { $pull: { iWatched: { userID: 306 } } } )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"--b-using-aggregation-pipelines-1",children:"- B: Using Aggregation Pipelines"}),"\n",(0,s.jsx)(n.h4,{id:"--command-1-set-field-equal-to-another-field",children:"- Command 1: Set field equal to another field"}),"\n",(0,s.jsx)(n.p,{children:"$set works exactly the same as it is in normal MQL update, only now you can use other fields values as references."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.updateMany(\n{\n  userID: 354,\n},\n[\n  {\n    $set: {\n      'myPrefs.turnsMeOn': '$myDetails.turnsMeOn',\n      'myPrefs.inPurposeOf': '$myDetails.inPurposeOf',\n  },\n},\n])\n"})}),"\n",(0,s.jsx)(n.h4,{id:"--command-2-unset-a-field",children:"- Command 2: Unset a field"}),"\n",(0,s.jsx)(n.p,{children:"$unset works differently in aggregation than in normal MQL update. If you try to apply $unset as its form in the normal MQL update within an aggregation update, you would get an error saying:*** $unset specification must be a string or an array\nThe proper way of applying $unset in an aggregation pipeline update is either by giving it a string with the field's name to unset, or an array of names in case there's more than 1 field you'd like to unset:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.updateMany(\n{\n  userID: 354,\n},\n[\n  {\n    $unset: ['myDetails.turnsMeOn', 'myDetails.inPurposeOf']\n  }\n]);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"--command-3-update-a-specific-object-inside-an-array-field",children:"- Command 3: Update a specific object inside an array field"}),"\n",(0,s.jsx)(n.p,{children:"The full form:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.users.updateMany(\n{\n  userID: 354,\n},\n{\n  $set: {\n    'messages.$[i].msgReadOnUnix': 1652348270,\n  },\n{\n  arrayFilters: [\n    {\n      $and: [\n        { 'i.senderID': 306 },\n        { 'i.msgReadOnUnix': -1 },\n      ]\n    }\n  ]\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"Explanation on how to use:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Part 1: $[identifier]\nTo achieve this, we use a normal MQL update, along with the familiar $set operation, only with a little twist. To reference an array cell, we need to use a special syntax of $[identifier].\nLike so: ",(0,s.jsx)(n.code,{children:"$set: { 'ARRAY.$[IDENTIFIER].FIELD_NAME': some-value }"})]}),"\n",(0,s.jsx)(n.li,{children:"Part 2: arrayFilters\nIn the third object parameter of the update operator, we provide an arrayFilters.\narrayFilters is a special operator, that contains the conditions that would help determine which object inside the array are going to be updated. arrayFilters has a complex behavior, so in order to learn how to use it we need to discuss its rules, and how it behaves."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"-- ARRAY FILTER RULES"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rule Number 1:"})," must be an array\narrayFilters is followed by an array structure --\x3e arrayFilters: []"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rule Number 2:"}),' a single filter - an object inside the array\nThe array of arrayFilters contains objects which are filters.\nNow you must be thinking "Oh! Each object inside the array must be a filter in the sense that a filter means a single condition, that together have a relation of AND".\nWell... then no. Each object inside the array is a reference to exactly one array.\nWhat does it mean?\nConsider a case where you have an array of objects, and an object in that array contains another array within. MongoDB gives you a way to filter within that inner array! And that can be done by providing a first filter object that would filter by the first array, and a second filter object that would filter by the second array.\nIn 99% percent of cases, you would have an arrayFilters that contains only 1 object in its top level.\nSo now we know that the array of arrayFilters contains filter objects, that each object is a reference to an array in accordance to the level, and that in most cases we would only really need one filter for one top level array.']}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rule Number 3:"})," AND relation between different fields\nTo get an AND relation effect between different inner fields, we simply add them one after another, line by line, like so:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"arrayFilters: [{\n  'i.userID': 306,\n  'i.lastUpdated': { $lt: 555 }\n}]\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"WARNING!"})," ",(0,s.jsxs)(n.em,{children:["This implicit way of writing the AND relation can cause issues if you're using the ",(0,s.jsx)(n.strong,{children:"same"})," field name twice!"]}),"\nIn the example above, it is implied that we wish for an AND relation. We ask for userID 306 AND lastUpdated before 555.\nEven though the AND form has a default mode, you can always mention it explicitly:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"arrayFilters: [{\n  $and: [\n    { 'i.userID': 306 },\n    { 'i. lastUpdated':{ $lt: 555 }}\n}]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Notice how many more notes need to be added to get the same result!"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rule Number 4:"})," AND relation for the same key - duplicate key appearance\nWe saw that the filter in its default mode obscures an AND operation behind it, and that the filter has an object-like structure.\nSince the filter object is an object, a key CANNOT appear twice! It's not an error if it does, it's just that the last appearance of a key would override its predecessors.\nLet's see an example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"arrayFilters: [{\n  'i.userID': 306,\n  'i.userID': 304,\n  'i.userID':{ $lt: 2 }\n}]\n"})}),"\n",(0,s.jsx)(n.p,{children:"In the example above, only the third one would be taken into account."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rule Number 5:"})," OR relation between all fields\nTo get the effect of an OR relation, you must use the explicit way, like so:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"arrayFilters: [{\n  $or: [\n    { 'i.userID': 306 },\n    { 'i. lastUpdated':{ $lt: 555 }}\n}]\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-connect-to-remote-server",children:"3. Connect to Remote Server"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'mongosh "mongodb+srv://talkohavy:PASSWORD@sandbox.2pb0l.mongodb.net/LuckyLove"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["with 9 and no ",(0,s.jsx)(n.code,{children:"!"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-connect-to-a-local-server",children:"4. Connect to a local server"}),"\n",(0,s.jsx)(n.p,{children:"In the past, if you were working against a local server, you needed to have the terminal open twice, once for running the mongodb server, and once for the ability to run mongodb commands."}),"\n",(0,s.jsxs)(n.p,{children:["However, when using ",(0,s.jsx)(n.code,{children:"mongosh"}),", you'll only need one terminal. mongosh will take care of running a daemon service in the background"]}),"\n",(0,s.jsx)(n.p,{children:"The command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongosh\n"})}),"\n",(0,s.jsx)(n.p,{children:"That's it! You've just raised a local mongodb server, that's ready to accept & run commands."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-useful-shell-commands",children:"5. Useful shell commands"}),"\n",(0,s.jsx)(n.p,{children:"Here are some of the most used commands when using mongo shell."}),"\n",(0,s.jsx)(n.h3,{id:"--command-1-show-all-existing-databases",children:"- command 1: show all existing databases"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"show dbs\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"Shows the list of databases that are in the cluster."}),"\n",(0,s.jsx)(n.p,{children:'Note! Do not touch the "admin" and the "local" databases.'}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-2-use",children:"- command 2: use"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"use dbName\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"Selects a specific database."}),"\n",(0,s.jsx)(n.p,{children:'Note: If you do use dbName but dbName doesn\'t exist? You\'ll still get a "switched to db dbName" message! But if you do "show dbs", you won\'t see it on the list. What this means is that mongoDB wanted to be so flexible as to say "Yeah, we\'re ready to create that db for you if you desire, but technically? right now? It doesn\'t exist".'}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-3-show-collections",children:"- command 3: show collections"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"show collections\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"Shows all the collections in that specific database."}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-4-find",children:"- command 4: find()"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionName.find(query)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"This is your way of showing documents that answer to your query's\nspecifications. How to query? The find function you saw above requires a query.\nThe query is actually a json object like so:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "country": "israel",\n    "city": "ramat gan"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:'Important Note: If there are more than 20 document in the collection that match the query, know that only the first 20 will be shown as the result. To view the next 20 results type "it", which is short for iterate, and press Enter.'}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-5-findonequery",children:"- command 5: findOne(query)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionName.findOne(<query>)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"This is your way to find just one document that matches the query."}),"\n",(0,s.jsx)(n.p,{children:"Note: If no query would be inserted (empty), a random document would get pulled."}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-6-count",children:"- command 6: count()"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionName.find(<query>).count()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:'Explain: This is your way to answer the question "How many are there?".'}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-7-pretty",children:"- command 7: pretty()"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionName.find(<query>).pretty()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"This is your way to present results in a more human-readable way."}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-8-insert-one-or-more-documents",children:"- command 8: insert one or more documents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionName.insert(d1)\ndb.collectionName.insert([d1,d2,d3])\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"This is your way to insert a document."}),"\n",(0,s.jsx)(n.p,{children:"Note 1: To insert many documents, simply type in an array of documents like so:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'[{"name":"test1"}, {"name":"test2"}, {"name":"test3"}]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["But wait, there's more...",(0,s.jsx)(n.br,{}),"\n","Question: What if the array insert fails?",(0,s.jsx)(n.br,{}),"\n","Answer: Well, if we do db.XXX.insert([d1,d2,d3]), if d1 would fail to insert because let's say it has a duplicate _id error, then the entire insert operation halts! And even if d2 and d3 were supposed to be fine, they would not be inserted. Because the logic is like this: I'm going by the order they appear in the array, and if the n'th document fails? The n'th+1 and above would not be inserted.\nLuckily, we can change that!\nThere's an option we can add to the insert command like so:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.X.insert([d1,d2,d3],{"ordered":false});\n'})}),"\n",(0,s.jsxs)(n.p,{children:['This means: "every document that CAN be inserted will be inserted, and those who fail fail".',(0,s.jsx)(n.br,{}),"\n","Note 1: What if I did this?"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionNameThatDoesntExist.insert(<document/s>)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Amazingly, this would work! And not only that those documents would get inserted, but a collection would be created with that name you just provided.",(0,s.jsx)(n.br,{}),"\n",'Again, this is mongoDB coming to tell us "I want to be flexible!".',(0,s.jsx)(n.br,{}),"\n",'Same goes for databases (as you saw earlier in the "use" command).']}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-9-update-one-or-more-documents",children:"- command 9: update one or more documents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionName.updateOne(<who>,<what is the change>)\ndb.collectionName.updateMany(<who>,<what is the change>)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"This is your way to update a single document / multiple documents."}),"\n",(0,s.jsx)(n.p,{children:"Example: Update / Increase Ramat Gan's population by 10:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.cities.updateOne({"name":"ramat gan"},{"$inc": {"population": 10}})\n'})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-10-delete-one-or-more-field-value-pair",children:"- command 10: delete one or more field-value pair"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.p,{children:"Unprettified:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.grades.updateMany({"studentID":1,"classID":460},{"$unset":{"arr1":"", "arr2":""}})\n'})}),"\n",(0,s.jsx)(n.p,{children:"Prettified:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.grades.updateMany(\n    {\n        "studentID":1,\n        "classID":460\n    },\n    {\n        "$unset":\n            {\n                "arr1":"",\n                "arr2":""\n            }\n    }\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"This is your way to delete a single document / multiple documents."}),"\n",(0,s.jsx)(n.p,{children:"Example: Delete city of Ramat Gan:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.cities.deleteMany({"name":"ramat gan"})\n'})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-11-delete-one-or-more-documents",children:"- command 11: delete one or more documents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionName.deleteOne(<who>)\ndb.collectionName.deleteMany(<who>) or ({})\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"This is your way to delete a single document / multiple documents."}),"\n",(0,s.jsx)(n.p,{children:"Example: Delete city of Ramat Gan:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'db.cities.deleteMany({"name":"ramat gan"});\n'})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"--command-12-delete-one-collection",children:"- command 12: delete one collection"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 The Command:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.collectionName.drop()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2022 Description"})}),"\n",(0,s.jsx)(n.p,{children:"This is your way to delete a single collection."}),"\n",(0,s.jsx)(n.p,{children:"Example: Delete sales collection:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"db.sales.drop()\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Note: Removing all collection inside a database also removes the database!"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"6-importing--exporting-backups",children:"6. Importing & Exporting Backups"}),"\n",(0,s.jsx)(n.h3,{id:"--tldr",children:"- TLDR;"}),"\n",(0,s.jsx)(n.p,{children:"\u25cb Import a json to a collection in a database:"}),"\n",(0,s.jsxs)(n.p,{children:["Number 1: (the uri is ",(0,s.jsx)(n.code,{children:"localhost"})," WITHOUT a password)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoimport --db DB_NAME --collection COLLECTION_NAME --file DATA_FILE.json\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Number 2: (the uri is a ",(0,s.jsx)(n.code,{children:"remote"})," one WITH a password)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoimport --db DB_NAME --collection COLLECTION_NAME --config ./config.yml --file data.json\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u25cb To export from a collection in a database to a json file use this:"}),"\n",(0,s.jsx)(n.p,{children:"Number 1:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"___\n"})}),"\n",(0,s.jsx)(n.h3,{id:"--full-explanation",children:"- Full Explanation"}),"\n",(0,s.jsxs)(n.p,{children:["We will now discuss 4 commands for importing & exporting that will allow us to do quick backups, and restoring databases from those backups. They are the 4 commands: ",(0,s.jsx)(n.code,{children:"mongoimport"}),", ",(0,s.jsx)(n.code,{children:"mongoexport"}),", ",(0,s.jsx)(n.code,{children:"mongorestore"}),", and ",(0,s.jsx)(n.code,{children:"mongodump"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Starting from MongoDB 4.4, ",(0,s.jsx)(n.code,{children:"mongodump"}),", ",(0,s.jsx)(n.code,{children:"mongoimport"}),", ",(0,s.jsx)(n.code,{children:"mongoexport"}),", and ",(0,s.jsx)(n.code,{children:"mongorestore"})," are released separately from MongoDB Server and uses their own versioning, with an initial version of ",(0,s.jsx)(n.strong,{children:"100.0.0"}),". Previously, all four were released alongside the MongoDB Server and used matching versioning."]})}),"\n",(0,s.jsxs)(n.p,{children:["Let's say you want to save your work on another machine. There are 4 commands that allow you to do that easily.",(0,s.jsx)(n.br,{}),"\n","There are used for importing and exporting your db so that, for example, you would be able to work on them locally.",(0,s.jsx)(n.br,{}),"\n","But before that, we need to discuss 2 important format types: ",(0,s.jsx)(n.code,{children:"JSON"})," & ",(0,s.jsx)(n.code,{children:"BSON"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"-- JSON format"})}),"\n",(0,s.jsx)(n.p,{children:"JSON format is a human-readable format, but unfortunately it is text-based, and parsing of text-based is pretty damn slow. Other than the fact that parsing it is really slow, it is pretty expensive memory-wise."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"-- BSON format"})}),"\n",(0,s.jsxs)(n.p,{children:["That's why the ",(0,s.jsx)(n.code,{children:"BSON"})," format was invented!\n",(0,s.jsx)(n.code,{children:"BSON"})," is highly un-readable for human, however for computers? Very readable!\nSo, the parsing is much faster, but what about storage size?\nSo, also storage-wise, ",(0,s.jsx)(n.code,{children:"BSON"})," is much lighter than JSON, and that makes it great as a formatting storage. Furthermore, ",(0,s.jsx)(n.code,{children:"BSON"})," can support other data types that JSON can't tell the difference between. Perhaps now it's clear to you why we need 4 commands, because 1 & 2 relate to JSON, and 3 & 4 relate to ",(0,s.jsx)(n.code,{children:"BSON"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"--action-1-mongodump",children:"- Action 1: mongodump"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"mongodump"})," is a way to export ",(0,s.jsx)(n.strong,{children:"THE ENTIRE"})," data from a connection string.",(0,s.jsx)(n.br,{}),"\n","The entire data meaning all the databases that exist there.",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.code,{children:"mongodump"})," saves that data in the format of BSON.",(0,s.jsx)(n.br,{}),"\n","It creates a folder named \"dump\", if doesn't already exist, then another folder named as the project's title, and then dumps all the files there (BSON files).",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.code,{children:"mongodump"})," does not require an ",(0,s.jsx)(n.code,{children:"--out"})," flag, since it copies all the bson files it finds over at the remote. ",(0,s.jsx)(n.code,{children:"mongodump"})," can export data from either from standalone, replica set, or sharded clusters.\nThe mongodump command has the following form:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongodump <options> <connection-string>\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"danger",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"IMPORTANT NOTE!!!"})}),(0,s.jsx)(n.p,{children:"For security reason, you should omit the password from the connection string to have mongodump prompt for the password."})]}),"\n",(0,s.jsx)(n.p,{children:"mongodump usage examples:"}),"\n",(0,s.jsx)(n.p,{children:"dumping from localhost:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mongodump\n"})}),"\n",(0,s.jsx)(n.p,{children:"Exporting from luckylove remote:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongodump --uri mongodb+srv://talkohavy@sandbox.2pb0l.mongodb.net/LuckyLove?retryWrites=true\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The password is: ",(0,s.jsx)(n.code,{children:"a9*********f"})]}),"\n",(0,s.jsx)(n.h4,{id:"---action-2-mongoexport",children:"-- Action 2: mongoexport"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"mongoexport"})," is a way to export A ",(0,s.jsx)(n.strong,{children:"SINGLE COLLECTION"})," from A ",(0,s.jsx)(n.strong,{children:"SINGLE DATABASE"})," out of a connection string, or a yaml config file."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"mongoexport"})," saves that data in the format of JSON (or CSV).",(0,s.jsx)(n.br,{}),"\n","The ",(0,s.jsx)(n.code,{children:"mongoexport"})," command has the following form:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoexport --db=DB_NAME --collection=CONNECTION_STRING --out=OUT MORE_OPTIONS --uri=CONNECTION_STRING\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"_ options _"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 1: db"}),"\nSpecify the name of the database from which you want to export from."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 2: collection"}),"\nSpecify the name of the db from db you want to export from.\nThe documentation states that this is the only required field. But that's stupid right?? because\u2026 what would to database be then??? What's the default??? Nothing!!!"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 3: out"}),"\nAlso an important flag in my taste.\nSpecify a file name to which to want to output the export to.\nIf you don't specify an out flag, the export content would simply console log itself and that's it. No file would actually be created without mentioning the out flag."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 4: uri"}),"\nHere you can specify the connection string.\nNot specifying a uri flag would default to this:\n",(0,s.jsx)(n.code,{children:'--uri "mongodb://localhost:27017"'}),"\nWhen using the ",(0,s.jsx)(n.code,{children:"--uri"})," connection string, the database can be specified as part of the string, so you can skip the ",(0,s.jsx)(n.code,{children:"--db"})," flag by doing so. Using the uri flag is nice, but for security reasons, mongoDB suggests you use a config file."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 5: config"}),"\nSpecifies the full path to a YAML configuration file containing sensitive values for the following options to ",(0,s.jsx)(n.code,{children:"mongoexport"}),":\n",(0,s.jsx)(n.code,{children:"--password"}),"\n",(0,s.jsx)(n.code,{children:"--uri"}),"\n",(0,s.jsx)(n.code,{children:"--sslPEMKeyPassword"})]}),"\n",(0,s.jsx)(n.p,{children:"This is the recommended way to specify a password to mongoexport, aside from specifying it through a password prompt.\nThe configuration file takes the following form:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"password: PASSWORD\nuri: mongodb://mongodb0.example.com:27017\nsslPEMKeyPassword: PASSWORD\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Specifying a password to the ",(0,s.jsx)(n.code,{children:"password:"}),"\xa0field and providing a connection string in the\xa0uri:\xa0field which contains a conflicting password will result in an error.",(0,s.jsx)(n.br,{}),"\n","The ",(0,s.jsx)(n.code,{children:"sslPEMKeyPassword"})," specifies the password to ",(0,s.jsx)(n.strong,{children:"decrypt"})," the ",(0,s.jsx)(n.code,{children:"certificate-key"})," file. This is relevant only if you are using the flag of ",(0,s.jsx)(n.code,{children:"--sslPEMKeyFile"}),". If you do, use the flag of ",(0,s.jsx)(n.code,{children:"--sslPEMKeyPassword"})," option only if the certificate-key file is encrypted. In all cases, the ",(0,s.jsx)(n.code,{children:"mongoexport"})," will redact the password from all logging and reporting output. If the private key in the PEM file is encrypted and you do not specify the --sslPEMKeyPassword option, the ",(0,s.jsx)(n.code,{children:"mongoexport"})," will prompt for a passphrase. See TLS/SSL Certificate Passphrase. Alternatively, you can also specify the password directly in the URI connection string. Providing a connection string while also using ",(0,s.jsx)(n.code,{children:"--sslPEMKeyPassword"})," and specifying conflicting information will result in an error.\nBe sure to secure this file with appropriate filesystem permissions."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 6: sslPEMKeyFile"}),"\nSpecifies the .pem file that contains both the TLS/SSL certificate and key. Specify the file name of the .pem file using relative or absolute paths. This option is required when using the --ssl option to connect to a mongod or mongos that has CAFile enabled without allowConnectionsWithoutCertificates.\nAlternatively, you can also specify the .pem file directly in the URI connection string. Providing a connection string while also using ",(0,s.jsx)(n.code,{children:"--sslPEMKeyFile"})," and specifying conflicting information will result in an error."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 7: jsonFormat"}),"\nIf you need to preserve all rich BSON data types when using mongoexport to perform full instance backups, be sure to specify Extended JSON v2.0 (Canonical mode) to the ",(0,s.jsx)(n.code,{children:"--jsonFormat"})," option to ",(0,s.jsx)(n.code,{children:"mongoexport"}),", in the following fashion:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoexport --jsonFormat=canonical --collection=CONNECTION_STRING CONNECTION_STRING\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"--jsonFormat"})," is unspecified, mongoexport defaults to ",(0,s.jsx)(n.code,{children:"--jsonFormat=relaxed"}),".\n",(0,s.jsx)(n.code,{children:"mongoimport"})," will automatically use the JSON format found in the specified target data file when restoring. For example, it will use Extended JSON v2.0 (Canonical mode) if the target data export file was created by mongoexport with ",(0,s.jsx)(n.code,{children:"--jsonFormat=canonical"})," specified."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"mongoexport usage examples:"}),"\n",(0,s.jsx)(n.p,{children:"Exporting from localhost:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoexport --db LuckyLove --collection users --jsonFormat=canonical --out export/localhost/users.json\n"})}),"\n",(0,s.jsx)(n.p,{children:"Exporting from luckylove remote:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoexport --db LuckyLove --collection users --jsonFormat=canonical --config ./luckylove.config.yml --out export/luckylove/users.json\n"})}),"\n",(0,s.jsx)(n.h4,{id:"---action-3-mongorestore",children:"-- Action 3: mongorestore"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"mongorestore"})," program loads data from either a binary database dump created by ",(0,s.jsx)(n.code,{children:"mongodump"})," or the standard input into a mongod or mongos instance."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongorestore MORE_OPTIONS CONNECTION_STRING DIR_FILE_TO_RESTORE\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Omit the user's password from the ",(0,s.jsx)(n.code,{children:"--uri"})," string to have ",(0,s.jsx)(n.code,{children:"mongorestore"})," prompt for the password."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Option 1: collection"}),"\nSpecifies the name of the target collection for mongorestore to restore data into when restoring from a BSON file.\nIf you do not specify the --collection flag, the name of the target collection would be as that name of the input file. If the input file has an extension, MongoDB omits the extension of the file from the collection name."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"mongorestore usage examples:"}),"\n",(0,s.jsx)(n.p,{children:"Restoring from a dump directory to a localhost:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"// DID NOT TEST YET!\nmongorestore dump/\n"})}),"\n",(0,s.jsx)(n.p,{children:"Restoring from luckylove remote to localhost:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"// DID NOT TEST YET!\nmongorestore --uri mongodb+srv://talkohavy@sandbox.2pb0l.mongodb.net/LuckyLove?retryWrites=true dump/\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Password is: ",(0,s.jsx)(n.code,{children:"a9******f"})]}),"\n",(0,s.jsx)(n.h4,{id:"---action-4-mongoimport",children:"-- Action 4: mongoimport"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"mongoimport"})," tool imports content from an Extended JSON, CSV, or TSV export created by ",(0,s.jsx)(n.code,{children:"mongoexport"}),", or potentially, another third-party export tool."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"mongoimport"})," command has the following form:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoimport MORE_OPTIONS CONNECTION_STRING --file DATA_FILE\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Most of the flags available for ",(0,s.jsx)(n.code,{children:"mongoexport"})," are also available to ",(0,s.jsx)(n.code,{children:"mongoimport"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Some of the important flags are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 1: file"}),"\nSpecify the path to the file containing the data in a json format."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 2: drop"}),"\nLet's say you're importing from a file a database named local_expoint, but in your target there's already a database named exactly like that. In this case, by NOT specifying the ",(0,s.jsx)(n.code,{children:"--drop"}),", ",(0,s.jsx)(n.strong,{children:"the import would fail"}),". But if you do mention the ",(0,s.jsx)(n.code,{children:"--drop"})," flag, then before the import, a drop will occur and delete the existing database."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 3: collection"}),"\nSpecifies the collection to import. If you do not specify ",(0,s.jsx)(n.code,{children:"--collection"}),", ",(0,s.jsx)(n.code,{children:"mongoimport"})," takes the collection name from the input filename, omitting the file's extension if it has one."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 4: mode"}),"\n",(0,s.jsx)(n.em,{children:"Default: insert"}),"\nSpecifies how the import process should handle existing documents in the database that match documents in the import file. By default, mongoimport uses the ",(0,s.jsx)(n.code,{children:"_id"})," field to match documents in the collection with documents in the import file. To specify the fields against which to match existing documents for the upsert, merge, and delete modes, use the\n--upsertFields flag.\nRegarding the different modes available:\ninsert:\nInsert the documents in the import file. mongoimport will log an error if you attempt to import a document that contains a duplicate value for a field with a unique index, such as _id.\nupsert:\nReplace existing documents in the database with matching documents from the import file. mongoimport will insert all other documents. Replace Matching Documents during Import describes how to use --mode upsert.\nmerge:\nMerge existing documents that match a document in the import file with the new document. mongoimport will insert all other documents. Merge Matching Documents during Import describes how to use --mode merge.\ndelete:\nDelete existing documents in the database that match a document in the import file. mongoimport takes no action on non-matching documents. Delete Matching Documents describes how to use --mode delete."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 5: upsertFields"}),"\nSpecifies a list of fields for the query portion of the import process. ",(0,s.jsx)(n.code,{children:"--upsertFields"})," can be used with modes: upsert, merge, and delete.\nUse this option if the ",(0,s.jsx)(n.code,{children:"_id"})," fields in the existing documents don't match the field in the document, but another field or field combination can uniquely identify documents as a basis for performing upsert operations.\nIf you do not specify a field, ",(0,s.jsx)(n.code,{children:"--upsertFields"})," will upsert on the basis of the ",(0,s.jsx)(n.code,{children:"_id"})," field.\nTo ensure adequate performance, indexes should exist for the field or fields you specify with ",(0,s.jsx)(n.code,{children:"--upsertFields"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 6: maintainInsertionOrder"}),"\n",(0,s.jsx)(n.em,{children:"Default: false"}),"\nIf specified, ",(0,s.jsx)(n.code,{children:"mongoimport"})," inserts the documents in the order of their appearance in the input source. That is, both the bulk write batch order and document order within the batches are maintained. Specifying ",(0,s.jsx)(n.code,{children:"--maintainInsertionOrder"})," also enables ",(0,s.jsx)(n.code,{children:"--stopOnError"})," and sets numInsertionWorkers to 1. If unspecified, ",(0,s.jsx)(n.code,{children:"mongoimport"})," may perform the insertions in an arbitrary order."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Option 7: numInsertionWorkers"}),"\n",(0,s.jsx)(n.em,{children:"Default: 1"}),"\nSpecifies the number of insertion workers to run concurrently. For large imports, increasing the number of insertion workers may increase the speed of the import."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"mongoimport usage examples:"})}),"\n",(0,s.jsx)(n.p,{children:"importing from a file to localhost / luckylove:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoimport --db local_expoint --collection wtf --config ./localhost.config.yml --file export/expoint/test.json\n"})}),"\n",(0,s.jsx)(n.p,{children:"importing from a file to localhost / luckylove:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mongoimport --db shopping_ms_products --collection products --config ./localhost.config.yml --file data.json\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},5710:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>a});var s=o(758);const i={},t=s.createContext(i);function r(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);