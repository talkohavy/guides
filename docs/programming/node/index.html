<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-programming/node" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.1">
<title data-rh="true">Guide For NodeJS - the Hard Parts | ✨ Super Guides ✨</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://talkohavy.github.io/guides/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://talkohavy.github.io/guides/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://talkohavy.github.io/guides/docs/programming/node/"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="he"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Guide For NodeJS - the Hard Parts | ✨ Super Guides ✨"><meta data-rh="true" name="description" content="1. Introduction"><meta data-rh="true" property="og:description" content="1. Introduction"><link data-rh="true" rel="icon" href="/guides/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://talkohavy.github.io/guides/docs/programming/node/"><link data-rh="true" rel="alternate" href="https://talkohavy.github.io/guides/docs/programming/node/" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://talkohavy.github.io/guides/he/docs/programming/node/" hreflang="he"><link data-rh="true" rel="alternate" href="https://talkohavy.github.io/guides/docs/programming/node/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/guides/blog/rss.xml" title="✨ Super Guides ✨ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/guides/blog/atom.xml" title="✨ Super Guides ✨ Atom Feed"><link rel="stylesheet" href="/guides/assets/css/styles.aed79396.css">
<script src="/guides/assets/js/runtime~main.6e1cbce1.js" defer="defer"></script>
<script src="/guides/assets/js/main.cdec1f2f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_RAJn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/guides/"><div class="navbar__logo"><img src="/guides/img/logo.svg" alt="My Site Logo" class="themedComponent_REuZ themedComponent--light_XtwS"><img src="/guides/img/logo_dark.svg" alt="My Site Logo" class="themedComponent_REuZ themedComponent--dark_Hu0z"></div><b class="navbar__title text--truncate">Home</b></a><a class="navbar__item navbar__link" alt="Developer Guides" href="/guides/docs/programming/">Guides</a><a class="navbar__item navbar__link" href="/guides/blog/">Blogs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage__ntr"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/guides/docs/programming/node/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/guides/he/docs/programming/node/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="he">עברית</a></li></ul></div><a href="https://github.com/talkohavy/guides/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_RgnN colorModeToggle_VOM9"><button class="clean-btn toggleButton_b5kj toggleButtonDisabled_UIgk" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_YKEb"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_UAZy"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_ZDQZ"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_w5Xt"><div class="docsWrapper_TYYb"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_DXbG" type="button"></button><div class="docRoot_Rc1P"><aside class="theme-doc-sidebar-container docSidebarContainer_Zul0"><div class="sidebarViewport_ElR0"><div class="sidebar_p6f6"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_eYHN"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/guides/docs/category/photoshop-guides/">Photoshop</a><button aria-label="Expand sidebar category &#x27;Photoshop&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/guides/docs/programming/">Programming</a><button aria-label="Collapse sidebar category &#x27;Programming&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/docs/software-concepts/">- Software Concepts</a><button aria-label="Expand sidebar category &#x27;- Software Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/aws-kubernetes/">- AWS Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/crypto/">- Crypto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/css/">- CSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/design-patterns/">- Design Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/docker/">- Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/elasticsearch/">- ElasticSearch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/elk/">- ELK Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/git/">- Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/helm/">- Helm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/kubernetes/">- Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/micro-frontends/">- Micro-Frontends</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/mongodb/">- MongoDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/nest/">- NestJS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/docs/programming/node/">- Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/npm/">- npm publish a package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/postgres-sql/">- postgressql</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/python-server/">- Python Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/regex/">- Regex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/saml/">- SAML</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/software-architecture/">- Software Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/ssh/">- SSH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/storybook/">- Storybook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/syntax-highlighting/">- Syntax Highlighting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/what-is-long-polling/">- What is Long-Polling</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/docs/video-editing/ffmpeg/">Video Editing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/docs/job-interview/">MISC</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_N7K1"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_Medn"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_CcUi"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_jEiw"><div class="docItemContainer_iHv0"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k_hA" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/guides/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_Nnpr"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/guides/docs/programming/"><span itemprop="name">Programming</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">- Node</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_gx8D theme-doc-toc-mobile tocMobile_WRvL"><button type="button" class="clean-btn tocCollapsibleButton_OUiY">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Guide For NodeJS - the Hard Parts</h1></header>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="1-introduction">1. Introduction<a href="#1-introduction" class="hash-link" aria-label="Direct link to 1. Introduction" title="Direct link to 1. Introduction">​</a></h2>
<p>Key Node.js Features</p>
<p>Some of the critical features of Node.js include:</p>
<ul>
<li>1 Easy: With tons of tutorials and a large community, Node.js is relatively easy to start with — it’s a go-to choice for web development beginners.</li>
<li>2 Scalable: Node.js is single-threaded, which means it can handle a massive number of simultaneous connections with high throughput and provides vast scalability for applications.</li>
<li>3 Speed: Non-blocking thread execution makes Node.js fast and efficient.</li>
<li>4 Packages: A vast set of open source Node.js packages is available that can simplify your work. There are more than one million packages in the NPM ecosystem today.</li>
<li>5 Strong backend: Node.js is written in C and C++, making it faster for running a server and adding features like networking support.</li>
<li>6 Multi-platform: Cross-platform support allows you to create websites for SaaS products, desktop apps, and even mobile apps.</li>
<li>7 Maintainable: Node.js is an easy choice for developers since both the frontend and backend can use JavaScript.</li>
</ul>
<hr>
<p>Node JS is one of the most powerful technologies to emerge within the last 15 years.
It allows us to build applications that enable us to handle millions of users at once.
Some of the largest companies in the world, therefore, use it:</p>
<ul>
<li>LinkedIn</li>
<li>Uber</li>
<li>Netflix</li>
<li>IBM
All of them use Node.
But not only that! Node if going to allow us to build Desktop apps, compatible with windows, Mac and linux operating systems.
Here are some softwares that use Node (packaged up as Electron):</li>
<li>Slack</li>
<li>Twitch</li>
<li>Vs Code</li>
<li>Atom
But most important for us full stack developers, it allows us to build apps end-to-end in just one language - which is JavaScript.
This concept was introduced as - Isomorphic JavaScript, which means, writing client-side code &amp; server-side code in the same language.
Up until some time ago, before Node came to be, the most popular languages to write server code were:</li>
<li>PHP</li>
<li>Java</li>
<li>Ruby</li>
<li>C/C++
And as you can see, JavaScript ain&#x27;t one of them.
JavaScript was a Client side language for so many years. It doesn&#x27;t have access to our computer&#x27;s internal features.
Our dream, for many years, was to be able to use JavaScript for accessing all our computer&#x27;s internal features.
For instance, the networking ability, the ability to receive a message, to look at a received message, inspect it, and decide what to send back to the client.
Well, actually, there are a bunch of internal features of our computer we might want to use, such as:</li>
<li>Network socket - Receive and send back messages over the internet</li>
<li>Filesystem - that&#x27;s where the html/css/js files are stored in files</li>
<li>CPU - for cryptography and optimizing hashing passwords</li>
<li>Kernel - I/O management</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="2-the-process-object">2. The Process Object<a href="#2-the-process-object" class="hash-link" aria-label="Direct link to 2. The Process Object" title="Direct link to 2. The Process Object">​</a></h2>
<p>The process object in Node.js is a global object that can be accessed inside any module without requiring it.
There are very few global objects or properties provided in Node.js and process is one of them.
It is an essential component in the Node.js ecosystem as it provides various information sets about the runtime of a program.
This process object is an instance of the EventEmitter class.
It does contain its own pre-defined events such as exit which can be used to know when a program in Node.js has completed its execution.
Process also provides various properties to interact with. Some of them can be used in a Node application to provide a gateway to communicate between the Node application and any command line interface. This is very useful if you are building a command line application or utility using Node.js.
• process.stdin: a readable stream
• process.stdout: a writable stream
• process.stderr: a wriatable stream to recognize errors
Using argv you can always access arguments that are passed in a command line. argv is an array which has the running program as the first element (which is always going to be Node) and the absolute full path of the file as the second element. From the third element onwards it can have as many arguments as you want.</p>
<p><strong>- process operation 1: &quot;on&quot; or &quot;addListener&quot;</strong></p>
<p>addListener and on are actually aliases.
Doing <code>process.on(&#x27;some-event&#x27;, cb)</code> is the same as doing <code>process.addListener(&#x27;some-event&#x27;, cb)</code>.</p>
<p>Events Related to <em>process</em>:</p>
<p><strong>• Event 1: &#x27;exit&#x27;</strong></p>
<p>Run the below program and you can observe that the result comes up with status code 0. In Node.js (and in any other programming language) this status code means that a program has run successfully.</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;exit&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">code</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Will not get displayed&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Exited with status code:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Execution Completed&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>• Event 2: &#x27;unhandledRejection&#x27;</strong></p>
<p>Run the following code:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;exit&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">code</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>• Event 3: &#x27;unhandledException&#x27;</strong></p>
<p>Run the following code:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;exit&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">code</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p><strong>process operation 2: Read / Write</strong>
You have Read / Write operations just like console.log on the process object.
process.stdout.write(&#x27;Hello World!&#x27; + &#x27;\n&#x27;);</p>
</li>
<li>
<p><strong>process operation 3: exit</strong>
Terminate a program, and giving it an exit code.
process.exit(1);</p>
</li>
<li>
<p><strong>process operation 999: other useful things</strong>
process.pid
process.argv
process.env
process.cwd()
process.memoryUsage()</p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="3-the-mental-model">3. The Mental Model<a href="#3-the-mental-model" class="hash-link" aria-label="Direct link to 3. The Mental Model" title="Direct link to 3. The Mental Model">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--background">- Background<a href="#--background" class="hash-link" aria-label="Direct link to - Background" title="Direct link to - Background">​</a></h3>
<p>In this guide, we&#x27;re going to learn what it means to &quot;open a web application&quot;.
We&#x27;re basically, in the most fundamental way, talking about communication between 2 computers. Just to have a clear distinction from now on, let&#x27;s call computers who initiate the communication Clients, and say that we have many of those, and call the computer which holds the application the Server, which is called like that because it serves something back. A &quot;web application&quot;, is, at it core, an application running on a server (computer) that can receive messages from... other computer, clients. Th &quot;web application&quot; is (or at least should be) always &quot;on&quot;, always connected to the internet, and always ready... to receive messages sent out by other people&#x27;s computers. And what do I do as a developer to tell the computer to look at the message and send something back? I write code!</p>
<p>But there&#x27;s a problem...</p>
<p>Where does this message, the one being sent to me, arrive on? It arrives on the Network Card.<br>
<!-- -->In what languages can I write that has access to my network card?</p>
<ul>
<li>PHP</li>
<li>Java</li>
<li>Ruby</li>
<li>C/C++</li>
</ul>
<p>So we&#x27;ve established that a language who wants to write server code, needs to have access to the Network Card.<br>
<!-- -->Also, this language will need to have access to files!<br>
<!-- -->Because eventually, where do we write code? In files!<br>
<!-- -->So this language must have the ability to read from a file, and maybe even write to a file.<br>
<!-- -->It needs to have access to that computer&#x27;s filesystem. We put the Network Card and the FileSystem under a group that from now on we would call Internal Features. JavaScript doesn&#x27;t have access to our computer&#x27;s Internal Features. What language does have the ability to access our computer&#x27;s Internal Features? C++</p>
<p>JavaScript is gonna have to work in hand with C++, so that we could write JavaScript code to control C++ built-in features that allow us to control our computer&#x27;s internal features. And these two together are known as NodeJS.
Why is it called Node JS when they&#x27;re so much C++ in it still baffles me, but nevertheless - it is known as Node.</p>
<p>The model we are going to see over and over and over, again and again repeatedly, is:
JavaScript affects Node (which is C++), which affect a computer&#x27;s internal feature.
We&#x27;re going to spend the rest of this following course in writing JavaScript, to control indirectly via C++ the computer features we need to have access get our inbound message, and then send back a response (the right data, or the right html file).</p>
<p>Does that mean I need to know C++?<br>
<!-- -->It turns out that - no.</p>
<p>We&#x27;re going to get from JavaScript a TON of labels, built in to JavaScript that are gonna give us control. labels like &quot;http&quot;, &quot;fs&quot;, and not so many more, that are not built-in per-say, but you&#x27;d have to sort of summon on-demand (import).
And those labels will give us access to C++ features, that give us access to the computer&#x27;s internals. We don&#x27;t need to know C++ code to do so, but we do need to understand the &quot;Mental Models&quot; of how it&#x27;s working, and how these JavaScript labels are gonna trigger C++ features. That&#x27;s what we&#x27;re gonna do.
We&#x27;ll get an intimate understanding of how JavaScript labels take command through C++, and get a ton of help from Node C++ (much of Node is a C++ code) in order to take command of the internal features of our computer.</p>
<p><strong>- Our Code Mental Model</strong></p>
<p>We write JavaScript code, or more accurately - we use JavaScript label that Node had prepared for us, in order to trigger Node C++ code, that eventually reaches an Internal Feature.
These JavaScript label look like they&#x27;re JavaScrip functions, but no, they are in fact facades, for in reality they are commands to Node C++ features.
The vast majority of all the interesting stuff, of Node&#x27;s hard work, is happening down over at C++ world, so we better understand what&#x27;s going on there, and also we better understand what&#x27;s going over at our computer&#x27;s internal features - like the socket.
But first in foremost, we had better have a good understanding about JavaScript.
Important note!
C++ isn&#x27;t gonna go directly to the network card itself. It&#x27;s actually gonna interact with some abstraction layers of the operating system. Things like: E.Po, K.Q. we&#x27;ll learn all about those stuff later on so hold on on that for now.
In our mental model,
JavaScript is going to have 3 major parts:</p>
<ol>
<li>Save data - numbers, strings, arrays, objects. And also - functionality, which means code that&#x27;s gonna run later on.</li>
<li>Runs code on data. Run a functionality on a piece of data. Run a function (function = a saved code that has not been used yet).</li>
<li>Has a TON of built-in labels that are gonna trigger Node features, that are written in C++, to use our computers internals.</li>
</ol>
<p>JavaScript&#x27;s main data store is called &quot;the Global Memory&quot;. The store of data I known as the &quot;global memory&quot;. JavaScript has the ability to go line by line, and that&#x27;s called the &quot;Thread of Execution&quot;. We mentioned earlier that a &quot;web application&quot; is an application able to receive messages from outside users/clients, and that we use code to look at those messages.<br>
<!-- -->So first,
How do we bundle up code? We wrap it in a function! So although it may seem trivial, functions will turn out to be the most important construct in JavaScript. Functions = code that&#x27;s bundled up which we&#x27;re saving to run at a later time. In simple JavaScript, in order to run a function, we, ourselves, the developers, put on the parenthesis at the end of a function&#x27;s label manually. I have a sneaking suspicion... that Node might end up being the one who puts the parens on the end of our function code. And also, the one who inserts the input automatically for us. And that&#x27;s gonna turn out to be the entire paradigm... of Node.
Because, when a request comes in, I don&#x27;t know when it&#x27;s gonna come! Node would be the one to know, so therefore Node must be the one to trigger... executing the function.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="4-the-http-module">4. The http module<a href="#4-the-http-module" class="hash-link" aria-label="Direct link to 4. The http module" title="Direct link to 4. The http module">​</a></h2>
<p>(HTTP = HyperText Transfer Protocol)
Let&#x27;s remind ourselves the final goal first.
Our dream is to write JavaScript code, that can look at an incoming message off the internet, inspect it, and send back the right response.
That&#x27;s our dream.
So, there&#x27;s better be a label in JavaScript, that accesses, or sets up a Node C++ feature, that can access the networking feature of our computer.
There better be one!
Well actually, there is - it&#x27;s called &quot;Net&quot;.
But there&#x27;s a more specialized one, called &quot;http&quot;.
&quot;http&quot; = a Node feature that&#x27;s gonna access the network card (effectively) and be able to receive messages in the HTTP format. Later on we&#x27;re gonna see HTTP in a greater detail, but for now know that it&#x27;s a format by which you send messages (or &quot;requests&quot;) from a web browser, and we need our network open, and we&#x27;re gonna discover that what we actually open is a socket, which is an open connection to the internet, an open channel. A two-way open channel. And we&#x27;re gonna discover that this open connection, we need to have it formatted such that it ready to receive HTTP formatted messages.
How are we gonna do that from JavaScript?
Via labels, that trigger a Node C++ feature, that triggers an internal feature of our computer.
A powerful feature of Node C++ is &quot;http&quot;.
We are now going to see an &quot;http&quot; feature of Node being used to set up and open a socket connection to the internet.
Socket is a posh word for saying &quot;an open channel for data to go in and out of a place over the internet&quot;.
Sounds complicated right??
All we ever wanted was to build a cool looking app!
But folks, if we get this principle down... we&#x27;ll discover there&#x27;s nothing else to Node.
In this guide we&#x27;re going to see ALL features of Node, besides one - Multiple threaded tasks.
Multiple threaded tasks meaning, that in some way we could handle more than one, multiple JavaScript instances at a time.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="5-createserver">5. createServer<a href="#5-createserver" class="hash-link" aria-label="Direct link to 5. createServer" title="Direct link to 5. createServer">​</a></h2>
<p>It turns out, that http has a built-in method called createServer.
createServer can also be referred to as a label... for a Node C++ feature, that sets up an open channel to the internet.
http.createServer is a command for a Node C++ feature.
To do what?
To set up a network feature of Node, specializing in http protocol, ready to receive messages. Well, that&#x27;s not really interesting, cause what&#x27;s really interesting is what it&#x27;s gonna do in the computer&#x27;s internals. With the help of libuv.
libuv is a bunch of pre-written C++ code, technically built separately from Node, BUT! Its most prominent use is in Node.
libuv is a bunch of C++ code written to ensure that we can run Node on any operating system, and link up effectively between c++ code written in Node, with any computer internal structure, whether it&#x27;s a Mac, linux, or windows.
So, let&#x27;s repeat that one more time:
http.createServer is a command for a Node C++ feature, that with the help of libuv, is going to set up in the computer&#x27;s internals an open socket, an open channel to the internet, ready to receive messages.
That&#x27;s it! One line!
const server = http.createServer();
Our computer is now ready (almost) to receive messages. In one line! In one label! It opened that channel. In and out messages.
One issue though.
There are about 64,000 numbers that represent entry points to my computer.
That&#x27;s a bit of an issue, because when a message arrives at my computer, which entry point it would come in at?
The default port for ANY http sent message coming from a browser is (of course) 80.
So that message is gonna try and arrive at port 80.
Well,
One might say &quot;Damn, I already created a server with that one line, without setting the port number&quot;.
&quot;How the hell do we continue to edit it? It is even possible?&quot;.
Luckily,
Node realized that we&#x27;re not gonna do all of the commands for the underlying C++ feature in one line, so what does it does?
The other thing that createServer dies is immediately, and this is crucial to understand, IN JAVASCRIPT returns out an object full of functions, methods, including ones like &quot;listen&quot; and &quot;on&quot;, all of which, when run, will allow us to continue edit the instance of the http feature in Node that we&#x27;ve set up.
Let&#x27;s repeat that one more time:
What http.createServer does in Node is divided into 2 parts. One part is related to what it&#x27;s doing in Node, and the second part relates to what it&#x27;s doing in JavaScript.
In Node,
createServer sets up the &quot;http&quot; feature of Node, which is actually behind the scenes sending a message to the computer&#x27;s internals, where it&#x27;s going to turn on in the networking portion of our computer an open socket, which is a fancy word for saying &quot;an open channel to the internet that is two-way&quot;, meaning that it can receive data and send data back. Node&#x27;s output of running createServer is setting up a socket.
In JavaScript,
createServer returns an object full of methods, which we call &quot;edit functions&quot;, since they let us &quot;edit&quot; this particular Node HTTP instance, that are linked directly to the particular socket that has been opened by createServer. This object being returned is a JavaScript output of running createServer, which allow us to ongoingly modify the server.
Here are some of the main functions that are available to us on the return object:</p>
<ul>
<li>listen</li>
<li>on
We&#x27;ve also mentioned that a socket needs a port number specified. The listen method is an edit function that lets us edit the port number of the http server instance.
The &quot;on&quot; method (function) let&#x27;s us setup what functions we want to auto-run when a certain event occurs.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="6-the-listen-method">6. The &quot;listen&quot; method<a href="#6-the-listen-method" class="hash-link" aria-label="Direct link to 6. The &quot;listen&quot; method" title="Direct link to 6. The &quot;listen&quot; method">​</a></h2>
<p>The &quot;listen&quot; function is a method on the returned JavaScript object which comes back from createServer.
The &quot;listen&quot; method is used to have the HTTP server start listening for connections.
The &quot;listen&quot; method has an edit access to the open socket created by createServer.
The &quot;listen&quot; method doesn&#x27;t do anything in JavaScript.
That thing that the &quot;listen&quot; method can edit is the port number. It sets the port to whatever you tell it to.
We use it like so:
server.listen(80);
And there we have it, our computer is now ready to receive messages from the internet, in two lines!!
A lot of shot is happening behind the scenes, but... it&#x27;s 2 lines in JavaScript, to trigger a ton of sophisticated stuff, like opening a channel at a specific entry point.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="7-auto-run-a-function">7. Auto-Run a Function<a href="#7-auto-run-a-function" class="hash-link" aria-label="Direct link to 7. Auto-Run a Function" title="Direct link to 7. Auto-Run a Function">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--auto-run-a-function">- Auto-Run A Function<a href="#--auto-run-a-function" class="hash-link" aria-label="Direct link to - Auto-Run A Function" title="Direct link to - Auto-Run A Function">​</a></h3>
<p>const server = http.createServer();
server.listen(80);
A recap from earlier - we set up a channel ready to receive data in 2 lines.
So, let&#x27;s first review a scenario:
A message comes into our computer, an inbound message comes, and we want to do something like this:
Pseudo-code: if (inboundMsg) --&gt; send back proper response
There&#x27;s a problem here.
When is this code going to run?
In fact, I have no idea! A message could arrive at any giver time day or night!
Who does know when an inbound message arrives?
Node knows!
And so, perhaps... we&#x27;re going to rely on Node to AUTOMATICALLY run this line of code for us.
But how could we bundle up the code in order for it to be triggered to auto-run by Node?
In a function.
And that&#x27;s what we&#x27;re gonna do again and again and again.
We&#x27;re gonna bundle up code in a function, that we want to have auto-run by Node to do stuff like - look at an inbound message, and send data back, when Node sees (with the help of libuv) that a message has arrived.
We are going to save code, wrap it in a function, give that function a name like doOnIncoming, give that function to Node.
And in return, Node is gonna auto-run that function for us, when a request (inbound messages / request for data) arrives from a user.
const server = http.createServer(doOnIncoming);
server.listen(80);
It turns out,
createServer does an extra thing!
It accepts a function as an argument, that would be auto-run by Node on an incoming message. Whatever function we insert there, is what&#x27;s going to be auto-run when a message comes in.
Keep in mind,
As we&#x27;re going to see this again and again,
Any task that will take a long time, will be set up in Node, and then have a function attached to it, that will be automatically triggered to run when the background task either completes, or has activity.
Among these tasks are: talking to a database, talking to the file system.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--auto-insert-arguments">- Auto-Insert Arguments<a href="#--auto-insert-arguments" class="hash-link" aria-label="Direct link to - Auto-Insert Arguments" title="Direct link to - Auto-Insert Arguments">​</a></h3>
<p>We saw that createServer takes in a function as its first argument, and that we gave it doOnIncoming. When relying on Node to auto-run our doOnIncoming function, we give it the function&#x27;s label. Node will then automatically add parenthesis in order to execute my function when the time comes. However, that creates a problem for me, because if I&#x27;m not the one putting the parenthesis, how am I able to pass in arguments? to insert the arguments? It turns out, Node has two main jobs. Automatically add the parenthesis when the times comes, in order to auto-run it, and also... automatically insert the arguments full of data for me. And wouldn&#x27;t that be amazing, if that data were exactly the inbound message that I need to inspect, in order to determine what to send back. All I have to do in return, is prepare my function in a such a way, that I could catch those arguments when they are auto-inserted. And that&#x27;s all possible, by using placeholders known as - parameters.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="8-request--response">8. Request &amp; Response<a href="#8-request--response" class="hash-link" aria-label="Direct link to 8. Request &amp; Response" title="Direct link to 8. Request &amp; Response">​</a></h2>
<p>When an inbound message arrives at my computer, Node takes the function that we told it to run (my doInIncoming), and it runs it. But it also... passes in 2 objects. Now, we said that we want to see the message, and be able to read it. Wouldn&#x27;t it be amazing, if that first argument passed is actually the message itself? Turns out, it is! Do I get the the inbound message as a string? I actually don&#x27;t. Because Node wants to make my life easier. So instead, the next thing Node does as soon as a message comes in, it gonna immediately going to set an http message, ready to send back, but both of them are in a format that I don&#x27;t wanna deal with in JavaScript.
So instead, Node is going to automatically package up 2 JavaScript objects for us. Note that they are JAVASCRIPT objects, but they are being set by Node. Node is going to auto-create them. These two object are the most important objects in all of Node.
The first one is gonna package for us in a nice JavaScript object the important information from the inbound message.</p>
<p>What&#x27;s the most important information we got from the message?</p>
<ul>
<li>URL</li>
<li>headers</li>
<li>method</li>
<li>. . .</li>
</ul>
<p>Node is gonna parse the message, grab all the thing you might want and need, and put them in the object above, in those nice little objects (like req.url). This object comes without a label, so we need to give it one, we need to put placeholders (known as parameters) to capture this object and give it a name. The name can be anything we want. Traditionally, we called it &quot;req&quot;, but you can choose your own. Now, what do we want doInIncoming to do eventually? Reading is not our main purpose, it&#x27;s not our goal. Our goal is to eventually send back a response message! Reading is just means to that goal! How are we gonna do that? We better have inside this function&#x27;s code access to this message that&#x27;s going back, so we can add stuff to it, some data, maybe some html, or css, and send it back. So the next thing Node does, as soon as a message comes in, is it&#x27;s gonna immediately gonna set an http message, ready to send back, but both of them (the incoming &amp; the created outgoing) are in a format that I don&#x27;t wanna deal with in JavaScript. The second object Node created for me has a bunch of methods, javascript labels, for editing/updating the final result of the outgoing message. Fundamentally 2 different behaving objects. One has actually got the inbound data on it, which we can access, the other has functions that when we run them from javascript as labels, back into Node, to add stuff to the outgoing message which gets sent back.</p>
<p>So, a full recap:<br>
<!-- -->In 3 lines, we have set up our server.</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doOnIncoming</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Welcome to LuckyLove!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doOnIncoming</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>What does this code do:
⁃ save the function
⁃ use a label called createServer
⁃ To set up a Node background feature, which really is an internal feature, which is specifically opening a socket, an open channel to the internet. The talking to the internal features part is being done through a library called &quot;libuv&quot;.
⁃ To store a function (doOnInbound) to run when an inbound message comes in, by passing it as the first parameter. A function that will be automatically triggered by Node, and.... the most important piece of all, on an inbound message, not only Node is going to auto-run the function, Node is also going to auto-insert the 2 most important objects of all to it, the request &amp; response objects, that were automatically made by Node. One of them has all the information from the inbound message, packaged up in a nice format, each property holds 1 piece of information related to the message. And the second one is an object full of functions all of which are linked to auto-created response message, that we can add text to, or content to, HTML files images JavaScript files, by running some of the function on that auto-inserted second object. One of them is res.end, which tells Node &quot;Hey, this message is ready to be sent back, let&#x27;s go!&quot;. End can accept some things
⁃ to get an object full of functions, that we call our &quot;edit functions&quot;, that when run they tap into this instance of internal feature, and update it on the go.
⁃ Use the &quot;listen&quot; method on that returned server object to update the port to 80, and part listening.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="9-editing-the-soon-to-be-sent-out-response">9. Editing the soon-to-be-sent-out response<a href="#9-editing-the-soon-to-be-sent-out-response" class="hash-link" aria-label="Direct link to 9. Editing the soon-to-be-sent-out response" title="Direct link to 9. Editing the soon-to-be-sent-out response">​</a></h2>
<p>As we&#x27;ve mentioned before, Node gives us an object full of edit functions, which we can then use to edit our outgoing response.
The most common ones are &quot;write&quot; &amp; &quot;end&quot;, but we will see some more today.
The list is:</p>
<ul>
<li>end</li>
<li>write</li>
<li>headers</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="10-how-to-turn-on-node">10. How to turn on Node<a href="#10-how-to-turn-on-node" class="hash-link" aria-label="Direct link to 10. How to turn on Node" title="Direct link to 10. How to turn on Node">​</a></h2>
<p>Where do I write JavaScript? I can write JavaScript anywhere, it&#x27;s just some text. Typically I write JavaScript in a file, and then give it to the web browser to execute it, but I can write it anywhere. Node, however, is an app. It&#x27;s just an app that I turn on, just like a web browser. A web browser is just an app that has access to my computer&#x27;s internals, because we know it can send messages to the internet. Node is no different. How do I open a normal app on my computer? Double click. Unfortunately Node isn&#x27;t like that. Because developers hate double-clicking. They are pathologically oppose to using their mouse. So, instead we have a different way of of turning on apps, of interfacing with the computer&#x27;s features. And that&#x27;s by using the terminal/command line. We can even turn on VS Code from the terminal. And we can also turn on Node, by writing &quot;node&quot;, and pressing Enter. When we do so, we want it to start running some JavaScript code. Where do we tell it to run the code from? Aha! We&#x27;re gonna save some code in a file, and then give the name of the file along with its path to the node command:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">node ./server.js</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If Node is installed on your computer, it will start loading. It will turn on Node, which would turn on the JavaScript engine, that will allow you to turn on node features by writing javascript (-ish) code. We write all that javascript code in that saved file which path we provided. Before the days of &quot;nodemon&quot;,iIf we had done any changes in our javascript file (server.js), we would have had to turn off Node, turn it back on, run through all the javascript code, and set up all of those internal features all over again.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="11-error-handling---the-serveron-method">11. Error Handling - The &quot;server.on&quot; method<a href="#11-error-handling---the-serveron-method" class="hash-link" aria-label="Direct link to 11. Error Handling - The &quot;server.on&quot; method" title="Direct link to 11. Error Handling - The &quot;server.on&quot; method">​</a></h2>
<p>We get errors in server side development. We&#x27;re bound to! Because eventually we&#x27;re dealing with someone else&#x27;s computer! Trying to send us messages. There&#x27;re a 1000 things that could go wrong in the process. We need to be able to handle errors. We need to understand better how our background http feature is working. Right now, it only auto-triggers doOnIncoming, when the message comes in. But what if we get a corrupt request? Do we want to look at at it? Investigate it? And send something back? No. We wanna look at it, maybe log it, and see what error is at hand. Wouldn&#x27;t it be nice if we could set up another function that will be the one to run when a client error shows up? Turns out, there&#x27;s a little piece of Node we haven&#x27;t discussed. When the inbound message arrives, it&#x27;s not automatically running the function doOnIncoming. It actually sends out a loud shout! Within Node.
A message, they call it an &quot;event&quot;, just a word/string, that is emitted in Node. And that word is &quot;request&quot;. That event is what triggers the call to (the execution of) doOnIncoming. How do we tell Node that we want THAT function to trigger on THAT word when it&#x27;s broadcasted? Well, we actually did that implicitly, here:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doOnIncoming</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The first parameter passed to createServer, is actually saying &quot;Hey Node, when the word/event <code>request</code> gets emitted, run doOnIncoming&quot;.
But we can actually do it manually ourselves:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doOnIncoming</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Welcome to LuckyLove!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doOnError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">infoOnError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">infoOnError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;request&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> doOnIncoming</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;clientError&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> doOnError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Our return server object has another edit function called &quot;on&quot;. The &quot;on&quot; function doesn&#x27;t do anything in JavaScript, inly in Node. By the help of &quot;on&quot;, we can match between an event name built into Node, and a javascript function we had defined early on. When that event is then triggered by Node, Node will trigger the running of the function we gave it as a match. We are now seeing here that behind the scenes, we actually have 2 built-in events called &#x27;request&#x27; &amp; &#x27;clientError&#x27;. Previously, createServer was using one of them, even though we weren&#x27;t aware of this, when we ran http.createServer like this:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doOnIncoming</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>What it actually did behind the scenes is this:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;request&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> doOnIncoming</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Basically, this was saying: &quot;When a good message comes along, i.e. when the request event is emitted, invoke the function called doOnRequest&quot;. But what if a bad request comes along? For that we have an event name known as &quot;clientError&quot;.
So together, we have two:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;request&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> doOnRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;clientError&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> doOnError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And these are the explicit way to do so, to attach a function to a certain event that&#x27;s emitted.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="12-the-file-system">12. The File System<a href="#12-the-file-system" class="hash-link" aria-label="Direct link to 12. The File System" title="Direct link to 12. The File System">​</a></h2>
<p>We have much of our app now set up, comprised of handling and inspecting the inbound message (which is in http format) known as requests. It&#x27;s the core of our app! People, it&#x27;s the core of Node. And it&#x27;s the core of servers. This IS Node. Everything else is ancillary. It&#x27;s really additional to this core model, of inbound message, send back a response. Cause that&#x27;s all we really care about, really, the heart of it, is a user/client wants stuff, we look at what they want, we have a message that&#x27;s ready to be sent out, we add stuff to that message, and send that back. However, Node can do even more. With Node, we can use a feature of the computer known as the File System, or simply the known as the hard-drive. How? Well Node, or rather C++, has access to that. It has a built-in feature that speaks to the File System. It&#x27;s known as fs, both in Node in JavaScript. Meaning that a label in JavaScript for Node&#x27;s fs is also called fs. We are now gonna see Node using another internal feature of our computer - the File Storage/System. Let&#x27;s now, for the sake of learning, assume we have a very large file called &quot;tweets.json&quot;. Where? Let&#x27;s say it&#x27;s in some folder called &quot;root&quot;. We will consider &quot;root&quot; to be the folder in which out Node application is running from, because all Node apps must run from some folder, and Node knows about it.</p>
<p>Alright, question! Do we have access to that file through JavaScript? Definitely not!
In the web browser we definitely not either! For security reasons! So from the start Node had no one to copy from about how to read/write a file. Thank god we had someone write a ton of C++ code to give us access, and of course the wonderful team at libuv, who worked in conjunction, but they are a big part of the interface between these two portions, especially when it comes to the file system. Because actually we&#x27;re gonna see libuv is gonna spin up a thread of execution in the background, to handle the pulling of that data into Node. And all that just because the creators discovered there was too much complexity, and too many risks, with relying on using the computer internal operating system ability to basically spin up a background thread or handle things going on in the background and said &quot;ok, we&#x27;re just gonna always make sure we have an open focus channel to pull this data into Node&quot;. We will talk more about that a little bit later.</p>
<p>So, we&#x27;re just about ready to start getting some data from our file system, where we saved a file called tweets.json. Now we want to use JavaScript labels, for a Node C++ feature, that&#x27;s written in C++, that does have access to out file system. What is the JavaScript label that gonna give us access to Node&#x27;s C++ feature that gives us access to the file storage? fs is the label, and fs.readFile is the specific label built-in to fs to give us access to read a file. fs.readFile takes in a string, which would later be interpreted to a &quot;path&quot;, a position of a file in our file system, and I&#x27;m guessing we&#x27;re gonna rely on Node to know how to go and look into the file system, grab that file, and start bringing it back in.</p>
<p>Let&#x27;s see some code:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// code that removes bad tweets.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useImportedTweets</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token parameter">errorData</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cleanTweetsJson </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cleanTweets</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> tweetsObj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cleanTweetsJson</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tweetsObj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tweet2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./tweets.json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> useImportedTweets</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The important line is of course the last line of <code>fs.readFile</code>. We see that readFile accepts a string as its first argument. To JavaScript? This is just a string of characters. It has no idea what that means. Node, however, is going to look at it and say &quot;oh ok, it&#x27;s asking for this specific location on the computer&quot;. The second parameter is a function that we want to have AUTO-RUN! That&#x27;s our keyword! Auto-ran!
When do you think that function is going to auto-run? When the file has been completely read. So JavaScript triggers a Node feature using a label called fs.readFile, passes it a string and a function to auto-run. Node then takes the two arguments and says: &quot;ok, let&#x27;s first have a look at that string and try to parse it as a path&quot;. It sees that it starts with a dot &quot;./&quot;, which tells its to look at the current running folder. For what file? For &quot;tweets.json&quot;. Node is doing that with the help of libuv. Now... without going into too much details... But just so you know, unlike for when we speak to the network where we.... Node and libuv do not handle the actual opening of the socket and the focusing of the thread on awaiting an inbound message. A thread is the computer&#x27;s ability to do a task, and focus on a single task at once. We are not responsible in either node or libuv for having a thread dedicated to an awaiting an inbound message. That is handled by the computers internals, the operating system itself. A thread is just the processing power of the computer to focus on a single task, meaning in this case to listen to an inbound message. We don&#x27;t do that in Node nor in libuv. It&#x27;s done by the operating system itself.</p>
<p>However, because there&#x27;s too much (and this is to my understanding) too much variety in how different computers implement access to file storage and file system, libuv said we&#x27;re gonna handle the setting up of a persistent thread that&#x27;s going to focus on pulling that data into Node, and we&#x27;re gonna be in charge of that, on any computer operating system you use.</p>
<p>This is one of the big senior questions in Node:</p>
<ul>
<li>
<p>&quot;Name an I/O in Node that sets up a dedicated thread, which is handled by libuv for doing that task&quot;</p>
</li>
<li>
<p>&quot;Name an I/O in Node that sets up a dedicated thread, which is NOT handled by libuv for doing that task&quot;</p>
</li>
</ul>
<p>The answer are: The File System - sets up a thread in libuv. I/O through a network/socket rely on the computer to do the focusing an awaiting on the inbound message. So, we&#x27;re reading that file, reading reading reading, and when the time comes, Node is going to auto-run the function, and pass it an argument! I have a feeling that the auto-created auto-inserted data (the argument) might just be the data the file (tweets.json) that had just been read. Notice how the error is the first argument being passed! This is known for as the &quot;Error first&quot; pattern, which Node embraced.
When there&#x27;s no error, the error object would default to null, not undefined! But null.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="13-the-event-system">13. The Event System<a href="#13-the-event-system" class="hash-link" aria-label="Direct link to 13. The Event System" title="Direct link to 13. The Event System">​</a></h2>
<p>Here we&#x27;re gonna do pretty much the same thing we did before, but this time we&#x27;re gonna be a bit more sophisticated, and add a key pattern - a pattern known as the &quot;Event System&quot;. The &quot;Event System&quot; is a system which behind the scenes, when things happen in the computer&#x27;s internal features, Node is going to broadcast a message.
The two events we saw were &quot;request&quot; &amp; &quot;clientError&quot;. By default, &quot;request&quot; &amp; &quot;clientError&quot; have no functions attached to them, but they still get triggered when an inbound message arrives, each at his own condition. Our job is to attach a function to the &quot;hook&quot; they each have, using the &quot;in&quot; method. Wishful thinking here, but we want doOnIncoming to auto-run when &quot;request&quot; is emitted, and doOnError to auto-run when Node shouts &quot;clientError&quot;.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="14-the-event-loop">14. The Event Loop<a href="#14-the-event-loop" class="hash-link" aria-label="Direct link to 14. The Event Loop" title="Direct link to 14. The Event Loop">​</a></h2>
<p><strong>- from the official docs</strong></p>
<ul>
<li>
<p>What is the Event Loop?<br>
<!-- -->The event loop is what allows Node.js to perform non-blocking I/O operations — despite the fact that JavaScript is single-threaded — by offloading operations to the system kernel whenever possible. Since most modern kernels are multi-threaded, they can handle multiple operations executing in the background. When one of these operations completes, the kernel tells Node.js so that the appropriate callback may be added to the poll queue to eventually be executed. We&#x27;ll explain this in further detail later in this topic.</p>
</li>
<li>
<p>Event Loop Explained
When Node.js starts, it initializes the event loop, processes the provided input script (which may make async API calls, schedule timers, or call <code>process.nextTick()</code> ), then begins processing the event loop.
The following diagram shows a simplified overview of the event loop&#x27;s order of operations.</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">┌───────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─&gt;│ timers │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─────────────┬─────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌─────────────┴─────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ pending callbacks │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─────────────┬─────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌─────────────┴─────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ idle, prepare │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─────────────┬─────────────┘ ┌───────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌─────────────┴─────────────┐ │ incoming: │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ poll │&lt;─────┤ connections, │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─────────────┬─────────────┘ │ data, etc. │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌─────────────┴─────────────┐ └───────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ check │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─────────────┬────  ─────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌─────────────┴─────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──┤ close callbacks │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────────────┘</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Each box will be referred to as a &quot;phase&quot; of the event loop.
Each phase has a FIFO queue of callbacks to execute. While each phase is special in its own way, generally, when the event loop enters a given phase, it will perform any operations specific to that phase, then execute callbacks in that phase&#x27;s queue until the queue has been exhausted or the maximum number of callbacks has executed. When the queue has been exhausted or the callback limit is reached, the event loop will move to the next phase, and so on.
Since any of these operations may schedule more operations and new events processed in the poll phase are queued by the kernel, poll events can be queued while polling events are being processed. As a result, long running callbacks can allow the poll phase to run much longer than a timer&#x27;s threshold. See the timers and poll sections for more details.
NOTE!!!
There is a slight discrepancy between the Windows and the Unix/Linux implementation, but that&#x27;s not important for this demonstration. The most important parts are here. There are actually seven or eight steps, but the ones we care about — ones that Node.js actually uses - are those above.</p>
</li>
<li>
<p>Phases Overview
• timers: this phase executes callbacks scheduled by setTimeout() and setInterval().
• pending callbacks: executes I/O callbacks deferred to the next loop iteration. idle, prepare: only used internally.
• poll: retrieve new I/O events; execute I/O related callbacks (almost all with the exception of close callbacks, the ones scheduled by timers, and setImmediate()); node will block here when appropriate.
• check: setImmediate() callbacks are invoked here.
• close callbacks: some close callbacks, e.g. socket.on(&#x27;close&#x27;, ...).</p>
</li>
<li>
<p>Phases in Detail</p>
</li>
</ul>
<p><em>Timers</em></p>
<p>A timer specifies the threshold after which a provided callback may be executed rather than the exact time a person wants it to be executed. Timers callbacks will run as early as they can be scheduled after the specified amount of time has passed; however, Operating System scheduling or the running of other callbacks may delay them.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="15-asynchronicity">15. Asynchronicity<a href="#15-asynchronicity" class="hash-link" aria-label="Direct link to 15. Asynchronicity" title="Direct link to 15. Asynchronicity">​</a></h2>
<p>...
setTimeout
The Timers module in Node.js contains functions that execute code after a set period of time. Timers do not need to be imported via require(), since all the methods are available globally to emulate the browser JavaScript API. To fully understand when timer functions will be executed, it&#x27;s a good idea to read up on the Node.js Event Loop.
setTimeout is not JavaScript. There&#x27;s no Timer in JavaScript. Even in the web browser, it&#x27;s something that happens in the background features of the browser, known as Browser APIs. In Node, we had to build those from scratch. And one of them is the ability to set up a Timer. Now, exactly how timers are run in Node? Well, for starters, what are timers? In general timers are just a time in the computer clock comparing a future time for how many milliseconds have passed to see whether enough milliseconds have passed to run that things which you delayed by X time seconds. So we&#x27;ll just call it a timer, but it&#x27;s technically doing that in the background, it&#x27;s setting a start time of which the time setTimeout run in the background, and then checking... well, actually it&#x27;s libuv, and actually, technically, it&#x27;s the event loop that checks every time &quot;has enough time has passed such that the timer is complete, and the associated function attached wants to run?&quot;.</p>
<p>...
The event-loop is very strict.
What rules does it set for what code to run next and when it may run?
...</p>
<p>There&#x27;s actually a whole bunch of queues. And different functions set to auto-run by Node will be put in different queues.
The event-loop is really restrictive on what has to have finished in synchronous regular JavaScript code before anything from those queues is allowed on to the callstack.
Node is most powerful because of the automated JS function execution triggered by Node at just the right moment.
This means we don&#x27;t have to wait in JS for the right moment to run code and block any other code running, but it also means we better know immediately how Node decides what to automatically execute at what moment.
And so we&#x27;re now gonna set up a scenario here, and see 9 lines of code, with 4 functions and we&#x27;re gonna delay 3 of them by using Node C++ features to attach these functions and have them auto-run. And we&#x27;re gonna see that each of the functions will behave differently. In other words, when it&#x27;s triggered and ready to run, it&#x27;ll be added to a different queue, and the event-loop will prioritize certain queues over other queues.</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useImportedTweets</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token parameter">errorData</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> tweets </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tweets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tweet1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">immediately</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;run me last! _crying_&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">printHello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Hello&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">blockFor500</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Block JS thread DIRECTLY for 500ms</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// with e.g. a for loop with 5m elements</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">printHello</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./tweets.json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> useImportedTweets </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">blockFor500</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Me first!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">setImmediate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">immediately</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Up here we&#x27;re saving 4 functions, and then gonna set a printHello function to run after 0 milliseconds (which I already have a feeling it won&#x27;t run after 0 milliseconds), and I&#x27;m gonna set up a function useImportedTweets to run after a bunch of tweet data being imported, the whole file using readFile. I&#x27;m then gonna run blockFor500 ms function, which we&#x27;re not gonna write the code of, but when it runs - it is not a timer! It is going to do some task in JS 5 million times that will end up taking 500ms in JavaScript, not in Node, but in JavaScript. Then, we&#x27;re gonna run a console.log, and then we&#x27;re gonna run a funny little thing called setImmediate - which is another Node feature that gives us control over putting stuff into another totally separate queue. We&#x27;ll see. We&#x27;re gonna see 3 of the queues today. There are 2 more which we&#x27;re not gonna cover, I&#x27;ll tell you what they are though.</p>
<p>The event-loop is very strict. What rules does it set for what code to run next and when those functions are allowed back in?</p>
<p>setTimeout is our first interesting line. When it executes, Node sets up a timer, gives it 0 milliseconds (as per the above code), so it immediately get a &quot;status&quot; of &quot;done&quot;, and where does it go? Does the function go back to our call stack? No! It goes into our &quot;Timer Queue&quot;. Then comes the line of fs.readFile() which sets up an instance of the fs feature of Node to access the file system, with the help of libuv, which actually sets up a background thread to handle the passing of the data and focus on the data coming in. readFile needs to know the path to the file, and the function to auto-run when it&#x27;s complete. Now, in JavaScript, we hit the line of calling blockFor500 ms. It gets pushed onto the call stack, and is gonna sit there for 500 ms. Let&#x27;s say, that around 200ms in, the fs.readFile finished its job. The file comes back. i shall remind you that the attached function to readFile, the auto-run function was useImportedTweets. What data is going to be auto-inserted to it? 2 parameters! The error data, which we hope would be null, and the file data in the Buffer format. Is the function useImportedTweets allowed into the call stack? Definitely not. So, instead, we have a second queue, which is called the &quot;I/O queue&quot;, or the &quot;I/O callback queue&quot;. Into it are queued up any functions triggered to run by... well honestly most of Node. Like, 95% of the functions you&#x27;ll have set to auto-run will end up in this queue. Any ones that involve data coming from the file system, from a network socket, any of those, all the associated auto-run functions go into the I/O callback queue. So useImportedTweets is stored within the &quot;I/O callback queue&quot;. An so it sits there, waiting for the event loop to call it.
After 500ms have passed since the initiation of blockFor500, does the event loop feel free to go look inside one of the queues? No! Because it still has some code left to run/execute within the script! What is the next thing it runs?</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Me first!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>So, &quot;Me first!&quot; Is really the thing that&#x27;s gonna get printed first. But even now, there&#x27;s still some more code we need to run! And this next one is really really an intriguing one.</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">setImmediate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">immediately</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is a feature of Node, to ensure that we can add a function to run, after all I/O functions have finished running. And that is called the &quot;Check Queue&quot;. How do I get a function into the check queue? I use setImmediate. Whatever function I pass into setImmediate, that function will be absolutely the opposite of running immediately. It is the worst named function in all of history, and it&#x27;s been at least 10 years since it was released, so bear that in mind. It is the worst name, because it is in the LAST queue that&#x27;s gonna be checked. But put the name aside for a moment, there are times where we want to make sure that all I/O work at that point has been done. All completed input/output auto-run functions have run. And the way we can do that is by using setImmediate that will put the associated function in the last queue. So, we ran setImmediate, pass it the function we called immediately. This setImmediate function also speaks to Node, which is going to set up a C++ background feature, that instantly grabs the associated function passed and pushes it into the &quot;Check queue&quot;. Now, is there any global code left? Is there anything on our call stack? No! So here kicks in the event loop, and says &quot;We&#x27;re good to check the queues!&quot;.</p>
<p>What is the status of each of our queues?</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">(Partial sketch...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│───────────────────────────│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──│ global │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └───────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Call Stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Timer Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌───────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ (1) printHello, │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └───────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ I/O Callback Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌───────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ (1) useImportedTweets, │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └───────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Check Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌───────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──┤ (1) immediately, │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────────────┘</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>So the first queue we&#x27;re checking is the Timer Queue. Well it&#x27;s actually technically what&#x27;s called a Timer min-heap data-structure-wise, but we can metaphorically think of it as a queue. So we&#x27;re popping out printHello from the Timer Queue, and put it into the call stack. It gets executed, and prints &quot;Hello&quot; in our console. Next we are checking the IO callback queue, which is where 95% of our delayed functions to be auto-run will be in, which where the most interesting stuff are happening, because... timers are not that interesting. All stuff that&#x27;s interacting IO they all go in the IO callback queue. So Node checks the IO callback queue and finds there useImportedTweets, which was added there longgg ago, and oh! It&#x27;s got auto-inserted data! useImportedTweets is added to the call stack, gets executed, console logs tweet number 1, which let&#x27;s assume contained the word &quot;Hello&quot;. useImportedTweets is then dequeued from the call stack, and the event loop check its final queue, knowing that ALL IO callbacks had been ran automatically, handled one by by one, and then and only then we&#x27;d have Node check its final queue - the Check queue. Node checks the &quot;Check queue&quot; and finds there the function immediately, dequeues it, adds it to the call stack, executes it, and console logs &quot;Run me last&quot;.</p>
<p>Now,
We are not going to talk about Promises today, but if you watch &quot;async Hard Parts&quot; you would have heard about Promises. These are an alternative way of setting up work to happen in Node, with C++, where rather than a function being auto-run in JavaScript, data will be auto-updated in JavaScript that will trigger a function to run on that data. That function is not added to any of these queues. It&#x27;s added toe something called a &quot;Micro-task queue&quot;, which takes precedence over each of these queues. It&#x27;s like priority number 0. Not only that, it actually goes back and checks that queue between each of the checkings of the other queues. And ACTUALLY! There are TWO of those! Let&#x27;s call them (a) and (b). (a) The first one, is if we run a function which we&#x27;re not meant to use anymore, called process.nextTick(), and pass it a function, that one gets stuck in this very first queue here. (b) Any function delayed using Promises gets inserted into this second queue here. And in-between the event loop checking either one of the 3 queues we&#x27;ve mentioned before, it will always go back and first check these 2 micro-task queues, before it moves on to check the next queue. There&#x27;s one final queue called the &quot;close queue&quot;, which is on any &quot;close&quot; events. Those associated functions go into a 4th queue called the &quot;Close handle queue&quot;, and any functions set to auto-run on for example the closing of a stream, they will be added in this &quot;Close Queue&quot;. 6 queues in total, that the event loop prioritize: one two three and four, and a zero queue, which actually splits into (a) and (b), which get checked in between any of the other four queues.
That is now all the queues of Node&#x27;s event loop.</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">(Full sketch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│───────────────────────────│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──│ global │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └───────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Call Stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 0: the Micro-Task Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ (a) process.nextTick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ (b) Functions delayed using Promises</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 1: the Timer Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ setTimeout, setInterval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 2: the I/O Callback Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 3: the Check Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ setImmediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 4: the Close Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──┤ readStream.on(&#x27;close&#x27;), socket.on(&#x27;close&#x27;), ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This entire model is built in Node, with the help of libuv. All of these queues, and the event loop triggering, it is all in Node. Not JavaScript. It is all built in C++.</p>
<p>Summary - Rules for the automatic execution of JS code by Node 1. Hold each deferred function in one of the task queues when when the Node background API &quot;completes&quot;. 2. Add the function to the call stack (i.e. execute the function) ONLY when the call stack is totally empty (have the Event Loop check for this condition). 3. Prioritize functions in the &quot;Timer&quot; queue over the ones in the &quot;IO callback&quot; queue, over the ones in the &quot;Check&quot; queue, over the ones in the &quot;Close&quot; queue. AND!!! Prioritize the &quot;Micro-task Queue&quot; over any of these 4 queues.</p>
<p>A deferred function - when I say deferred I&#x27;m talking about the one that we didn&#x27;t run ourselves, and gonna be auto-run later, deferred, delayed.</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">           (Full sketch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│───────────────────────────│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┌──│ global │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └───────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Call Stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 0: the Micro-Task Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ (a) process.nextTick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ (b) Functions delayed using Promises</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 1: the Timer Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ setTimeout, setInterval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 2: the Pending Callbacks Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ executes I/O callbacks deferred to the next loop iteration. Callback for some System operations.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 3: the Poll Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ incoming: connections, requests, data, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 4: the Check Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│--│ setImmediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └──────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Queue 5: the Close Queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──┤ readStream.on(&#x27;close&#x27;), socket.on(&#x27;close&#x27;), ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>• Queue 2: The Pending Callbacks Queue</strong>
This phase executes callbacks for some system operations such as types of TCP errors. For example if a TCP socket receives ECONNREFUSED when attempting to connect, some unix systems want to wait to report the error. This will be queued to execute in the pending callbacks phase.</p>
<p><strong>• Queue 3: The Poll Queue</strong>
The poll phase has two main functions: 1. Calculating how long it should block and poll for I/O, then 2. Processing events in the poll queue.
When the event loop enters the poll phase and there are no timers scheduled, one of two things will happen:</p>
<p>• If the poll queue is not empty, the event loop will iterate through its queue of callbacks executing them synchronously until either the queue has been exhausted, or the system-dependent hard limit is reached.</p>
<p>• If the poll queue is empty, one of two more things will happen:</p>
<p>⁃ If scripts have been scheduled by setImmediate(), the event loop will end the poll phase and continue to the check phase to execute those scheduled scripts.</p>
<p>⁃ If scripts have not been scheduled by setImmediate(), the event loop will wait for callbacks to be added to the queue, then execute them immediately.</p>
<p>Once the poll queue is empty the event loop will check for timers whose time thresholds have been reached. If one or more timers are ready, the event loop will wrap back to the timers phase to execute those timers&#x27; callbacks.</p>
<p><strong>• Queue 4: The Check Queue</strong></p>
<p>This phase allows a person to execute callbacks immediately after the poll phase has completed. If the poll phase becomes idle and scripts have been queued with setImmediate(), the event loop may continue to the check phase rather than waiting.
setImmediate() is actually a special timer that runs in a separate phase of the event loop. It uses a libuv API that schedules callbacks to execute after the poll phase has completed. Generally, as the code is executed, the event loop will eventually hit the poll phase where it will wait for an incoming connection, request, etc. However, if a callback has been scheduled with setImmediate() and the poll phase becomes idle, it will end and continue to the check phase rather than waiting for poll events.
The main advantage to using setImmediate() over setTimeout() is setImmediate() will always be executed before any timers if scheduled within an I/O cycle (AND I SAY! NOT IF! BUT ALWAYS! DOESN&#x27;T MATTER WHEN IT&#x27;S CALLED!), independently of how many timers are present.</p>
<p><strong>• Queue 5: The Close Queue</strong>
If a socket or handle is closed abruptly (e.g. socket.destroy()), the &#x27;close&#x27; event will be emitted in this phase. Otherwise it will be emitted via process.nextTick().</p>
<p><strong>• Process.nextTick()</strong></p>
<p>You may have noticed that process.nextTick() was not displayed in the diagram, even though it&#x27;s a part of the asynchronous API. This is because process.nextTick() is not technically part of the event loop. Instead, the nextTickQueue will be processed after the current operation is completed, regardless of the current phase of the event loop. Here, an operation is defined as a transition from the underlying C/C++ handler, and handling the JavaScript that needs to be executed.</p>
<p>Looking back at our diagram, any time you call process.nextTick() in a given phase, all callbacks passed to process.nextTick() will be resolved before the event loop continues. This can create some bad situations because it allows you to &quot;starve&quot; your I/O by making recursive process.nextTick() calls, which prevents the event loop from reaching the poll phase.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="16-list-of-all-auto-emitted-events">16. List Of All Auto Emitted Events<a href="#16-list-of-all-auto-emitted-events" class="hash-link" aria-label="Direct link to 16. List Of All Auto Emitted Events" title="Direct link to 16. List Of All Auto Emitted Events">​</a></h2>
<p>All objects that emit events are instances of the EventEmitter class.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="-event-1-connection">• Event 1: connection<a href="#-event-1-connection" class="hash-link" aria-label="Direct link to • Event 1: connection" title="Direct link to • Event 1: connection">​</a></h3>
<p>A TCP server would emit a TCP connection event every time somebody connects.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="-event-2-body">• Event 2: body<a href="#-event-2-body" class="hash-link" aria-label="Direct link to • Event 2: body" title="Direct link to • Event 2: body">​</a></h3>
<p>If someone is doing an HTTP upload the request object would emit a &quot;body&quot; event, each time you get a packet of that load. So if somebody is uploading a stream, a movie or so, to your server, then you get: &quot;body&quot;... &quot;body&quot; ... &quot;body&quot; ...</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="17-node-vs-deno">17. Node V.s. Deno<a href="#17-node-vs-deno" class="hash-link" aria-label="Direct link to 17. Node V.s. Deno" title="Direct link to 17. Node V.s. Deno">​</a></h2>
<p>Ryan Dahl about Node:</p>
<ul>
<li>
<p><strong>• Regret 1</strong>: the extension-less require<br>
<!-- -->Also, this whole thing where you don&#x27;t include the extension in in the require module. why? it&#x27;s like needlessly non-explicit. You now have to probe the file system for different things: &quot;Did you mean .js? .ts? Did you mean dot bluh bluh bluh?&quot;. And like &quot;NO! just write the fu... the extension in there&quot;. And a lot of people disagree with me, there is some debate over this issue. People like the extension-less thing. It&#x27;s &quot;cleaner&quot;! or whatever. And i&#x27;m like.... &quot;No&quot;.</p>
</li>
<li>
<p><strong>• Regret 2</strong>: index.js<br>
<!-- -->Also.... index.js. I&#x27;m sorry. I thought it was cute. There&#x27;s index.html, i thought i would be cute for like you know when you include a directory that it would look up the index.js file. Sorry about that. This was like.... needlessly introduced. I regret those.</p>
</li>
<li>
<p><strong>• Regret 3: security</strong><br>
<!-- -->Unfortunately, in Node, we just bounce to everything, and there&#x27;s zero security. You run a Node program, and you have access to all sorts of system calls, and that was really a missed opportunity to be able to make a server-side runtime that could potentially be secure in certain situations. Obviously, if you wanted to give access to the disk, then people are going to be able to exploit the disk, but there are certain situations where you wanna run a program outside of the web-browser, but you don&#x27;t necessarily want it to be able to write to the disk, or access the network. Right? For example, a linter. It would be nice for me to be able to download the massive codebase that eslint is and run that without having worry about it taking over my computer - which it could.</p>
</li>
<li>
<p><strong>• Regret 4: the build system</strong><br>
<!-- -->Probably the biggest regret is the build system. Such a pain. Build systems are very very difficult, and very very important to building projects.
Node uses this thing called &quot;gyp&quot;.
If you&#x27;re writing a module that links to a C library, you use this thing called gyp, to compile that C library and link it into Node. Right?
Gyp is this thing that Chrome used to use, but later on Chrome abandoned gyp for this other tool called GN, several years later.
We couldn&#x27;t have predicted that, but that&#x27;s what happened, and now it&#x27;s been many many years since that happened, and Node is the sole user of gyp.
It&#x27;s a very funky interface. Like it&#x27;s a json file, but it&#x27;s in Python, it&#x27;s... it&#x27;s very terrible. To top it off, Node has several wrappers around this, one of them is called &quot;node-gyp&quot;, you might have heard about it. It&#x27;s just layers upon layers of unnecessary complexity. V8 doesn&#x27;t build with gyp anymore, it has a gyp wrapper to support Node, but... it&#x27;s just.... There&#x27;s just so much unnecessary complexity there, and yeah, I frankly think this is one of the biggest failures of Node.</p>
</li>
<li>
<p><strong>• Regret 5: package.json</strong><br>
<!-- -->I mistakenly made package.json popular by allowing the &quot;require&quot; in Node semantics to look into the package.json and look through files.
This made package.json necessary for Node programs where it was not before.
And then I ultimately included nom into Node, which made npm the standard Node distribution service.
The problem I have with the package.json, is that it gives this rise to the concept of &quot;modules&quot; as like a directory of files, where that wasn&#x27;t really a concept before. Like, we just had JavaScript files. Like, on the web you just have JavaScript files, and you can just script-tag and include them all over the place. There isn&#x27;t like a... you know, a thing!
The second problem I have with the package.json is that the package.json has all the unnecessary noise in it.
Like: license, repository, ...
Like, why am I filling this out? I feel like a book-keeper or something.
This is just unnecessary stuff to do, when all I&#x27;m trying to do is &quot;link to a library&quot;.</p>
</li>
<li>
<p><strong>• Regret 6: node_modules</strong>
This whole algorithm for resolving module names is just WILDLY COMPLEX!
It&#x27;s kind of been added to over time, in ways that are regrettable.
It deviates greatly from how browsers do stuff, and it&#x27;s my fault, and I&#x27;m very sorry, and unfortunately, it is impossible to undo now.</p>
</li>
</ul>
<hr>
<p>Deno is a runtime for JavaScript, TypeScript, and WebAssembly that is based on the V8 JavaScript engine and the Rust programming language. Deno was co-created by Ryan Dahl, who also created Node.js.</p>
<p>Deno explicitly takes on the role of both runtime and package manager within a single executable, rather than requiring a separate package-management program.
• Comparison with Node.js</p>
<p>Deno and Node.js are both runtimes built on Google&#x27;s V8 JavaScript engine, the same engine used in Google Chrome. They both have internal event loops and provide command-line interfaces for running scripts and a wide range of system utilities.</p>
<p>Deno mainly deviates from Node.js in the following aspects: 1. Supports only ES Modules like browsers where Node.js supports both ES Modules and CommonJS. CommonJS support in Deno is possible by using a compatibility layer.
Supports only URLs for loading local or remote dependencies, similar to browsers. Node.js supports both URLs and modules.</p>
<p>Does not require a package manager for resource fetching, thus no need for a registry like npm.
Supports TypeScript out of the box, using a snapshotted TypeScript compiler or the swc compiler with caching mechanisms.
Aims for better compatibility with browsers with a wide range of Web APIs.
Restricts file system and network access by default in order to run sandboxed code.
Supports a single API to utilize promises, ES6 and TypeScript features whereas Node.js supports both promise and callback APIs.
Minimizes core API size, while providing a large standard library with no external dependencies.
Uses message passing channels for invoking privileged system APIs and using bindings.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="18-spawn-child-process">18. Spawn Child Process<a href="#18-spawn-child-process" class="hash-link" aria-label="Direct link to 18. Spawn Child Process" title="Direct link to 18. Spawn Child Process">​</a></h2>
<p>If you want to harness the full power of your processor, you have what&#x27;s known in node as &quot;child processes&quot;.</p>
<p>There are 4 ways to instantiate a child process:</p>
<ul>
<li>exec</li>
<li>execFile</li>
<li>spawn</li>
<li>fork</li>
</ul>
<p>Node has a module that exports these 4 methods, and it&#x27;s called &quot;child_process&quot;.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="-method-1-exec">• Method 1: exec<a href="#-method-1-exec" class="hash-link" aria-label="Direct link to • Method 1: exec" title="Direct link to • Method 1: exec">​</a></h3>
<p>Using exec we can run a command inside our shell, and get the output back.
It is pretty useful when running SMALL commands, &quot;small&quot; meaning commands which have a small stdout.
Spawns a shell, then executes the command within that shell, buffering any generated output.
The command string passed to the exec function is processed directly by the shell and special characters (vary based on shell) need to be dealt with accordingly.</p>
<p>The command:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> exec </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;child_process&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">exec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ls -la&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> stdout</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> stderr</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stderr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stderr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stdout</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see from the example above, the exec command takes in 2 arguments: the command as a string, a callback function.</p>
<p>The callback function itself takes in 3 arguments:</p>
<ul>
<li>
<p><strong>error</strong>: that is in case there is an error executing this command. I.E. the command not found, or it has missing arguments.</p>
</li>
<li>
<p><strong>stderr</strong>: the command has been executed, but there has been some error inside the terminal.</p>
</li>
<li>
<p><strong>stdout</strong>: the response/output of a good execution of the command.
Problems with this command:
The problem with this &quot;exec&quot; command is that all the stdout is taken into buffer, and is then printed out to the console. So like, if we write a command which has a huge std output, then we won&#x27;t be able to use this method. You could verify that with the &quot;find&quot; method on your root directory:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> exec </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;child_process&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">exec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;find /&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> stdout</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> stderr</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stderr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stderr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stdout</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you try to run this, you&#x27;ll get an error saying:
error: maxBuffer length exceeded
If we want to execute command which have a large stdout, we need to use the &quot;spawn&quot; method.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="-method-2-spawn">• Method 2: spawn<a href="#-method-2-spawn" class="hash-link" aria-label="Direct link to • Method 2: spawn" title="Direct link to • Method 2: spawn">​</a></h3>
<p>Example of running ls -lh /usr, capturing stdout, stderr, and the exit code:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> spawn </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;node:child_process&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> child </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">spawn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ls&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;-lh&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/usr&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Catches portions of data streams (outputs) coming from the command:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">stdout</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">stdout: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Catches an error after executing the command successfully:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">stderr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">stderr: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Catches an error with the command itself. i.e. the command not found</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;error&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">There was an error with the command: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">error</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Catches an exit signal from the process:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;close&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">child process exited with code </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">code</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Catches an exit signal from the process:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;exit&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">child process exited with code </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">code</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The child_process.spawn() method spawns a new process using the given command, with command-line arguments in args.</p>
<p>The spawn method accepts 3 arguments as input:</p>
<ul>
<li>
<p>the command itself as string.</p>
</li>
<li>
<p>args: an array of flags &amp; sub-commands. An optional parameter. Defaults to an empty array.</p>
</li>
<li>
<p>options: used to specify additional options. An optional parameter. Defaults to this object:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> defaults </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">cwd</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">env</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>cwd: Use cwd to specify the working directory from which the process is spawned. If not given, the default is to inherit the current working directory. If given, but the path does not exist, the child process emits an ENOENT error and exits immediately. ENOENT is also emitted when the command does not exist.</p>
</li>
<li>
<p>env: Use env to specify environment variables that will be visible to the new process, the default is process.env. undefined values in env will be ignored.
IMPORTANT TO KNOW!!!
You cannot pass flags to the main command string. If you need flags the only way to pass them is by using the optional args argument:</p>
<div class="language-javascript codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-javascript codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Good: would work!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> child </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">spawn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;pnpm&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;-v&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Bad: would throw an exception...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> child </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">spawn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;pnpm -v&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>Exit Event V.S. Close Event
the short version is, &#x27;exit&#x27; emits when the child exits but the stdio are not yet closed. &#x27;close&#x27; emits when the child has exited and its stdios are closed.
Besides that they share the same signature.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/talkohavy/guides/docs/programming/node.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_JcqJ" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_lxtX"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/docs/programming/nest/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">- NestJS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guides/docs/programming/npm/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">- npm publish a package</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_qxgX thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-introduction" class="table-of-contents__link toc-highlight">1. Introduction</a></li><li><a href="#2-the-process-object" class="table-of-contents__link toc-highlight">2. The Process Object</a></li><li><a href="#3-the-mental-model" class="table-of-contents__link toc-highlight">3. The Mental Model</a><ul><li><a href="#--background" class="table-of-contents__link toc-highlight">- Background</a></li></ul></li><li><a href="#4-the-http-module" class="table-of-contents__link toc-highlight">4. The http module</a></li><li><a href="#5-createserver" class="table-of-contents__link toc-highlight">5. createServer</a></li><li><a href="#6-the-listen-method" class="table-of-contents__link toc-highlight">6. The &quot;listen&quot; method</a></li><li><a href="#7-auto-run-a-function" class="table-of-contents__link toc-highlight">7. Auto-Run a Function</a><ul><li><a href="#--auto-run-a-function" class="table-of-contents__link toc-highlight">- Auto-Run A Function</a></li><li><a href="#--auto-insert-arguments" class="table-of-contents__link toc-highlight">- Auto-Insert Arguments</a></li></ul></li><li><a href="#8-request--response" class="table-of-contents__link toc-highlight">8. Request &amp; Response</a></li><li><a href="#9-editing-the-soon-to-be-sent-out-response" class="table-of-contents__link toc-highlight">9. Editing the soon-to-be-sent-out response</a></li><li><a href="#10-how-to-turn-on-node" class="table-of-contents__link toc-highlight">10. How to turn on Node</a></li><li><a href="#11-error-handling---the-serveron-method" class="table-of-contents__link toc-highlight">11. Error Handling - The &quot;server.on&quot; method</a></li><li><a href="#12-the-file-system" class="table-of-contents__link toc-highlight">12. The File System</a></li><li><a href="#13-the-event-system" class="table-of-contents__link toc-highlight">13. The Event System</a></li><li><a href="#14-the-event-loop" class="table-of-contents__link toc-highlight">14. The Event Loop</a></li><li><a href="#15-asynchronicity" class="table-of-contents__link toc-highlight">15. Asynchronicity</a></li><li><a href="#16-list-of-all-auto-emitted-events" class="table-of-contents__link toc-highlight">16. List Of All Auto Emitted Events</a><ul><li><a href="#-event-1-connection" class="table-of-contents__link toc-highlight">• Event 1: connection</a></li><li><a href="#-event-2-body" class="table-of-contents__link toc-highlight">• Event 2: body</a></li></ul></li><li><a href="#17-node-vs-deno" class="table-of-contents__link toc-highlight">17. Node V.s. Deno</a></li><li><a href="#18-spawn-child-process" class="table-of-contents__link toc-highlight">18. Spawn Child Process</a><ul><li><a href="#-method-1-exec" class="table-of-contents__link toc-highlight">• Method 1: exec</a></li><li><a href="#-method-2-spawn" class="table-of-contents__link toc-highlight">• Method 2: spawn</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/guides/docs/programming/">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_sx_D"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_sx_D"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_sx_D"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/guides/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_sx_D"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>