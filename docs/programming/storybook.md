---
sidebar_label: '8. Storybook'
sidebar_position: 6
---

# Guide for Storybook

## 1. Getting started

### Introduction

Storybook scans your project and looks for files which end with .stories.js or .stories.ts. Notice how it has `stories` in it's path, in plural, to note that each file representing a component can export multiple stories. A \*.stories.js file defines all the stories for a component. Each story has a corresponding sidebar item in the Storybook app. When you click on a story, it renders in the Canvas an isolated preview iframe.

### A Component's Meta

Each `stories` file must have a Component's `Meta`, and export default it.  
The `meta` is simply a javascript object with properties.  
At the very least, the `meta` object must contain the `component` key, which points to the _actual_ component.

```js title="Button.stories.js"
import Button from './Button';

export default {
  component: Button
}
```

### Layout Centered

Another nice-to-have key inside meta is the `parameters.layout`, which tells Storybook where to render the component on the screen. By default, it renders it on the top-left, but it would be nice to have it centered, right?
To do so, simply add:

```js title="Button.stories.js"
import Button from './Button';

export default {
  component: Button,
  parameters: {
    // Optional parameter to center the component in the Canvas. More info: https://storybook.js.org/docs/react/configure/story-layout
    layout: 'centered',
  },
}
```

### A Story

```js title="YourComponent.stories.js"
import { YourComponent } from './YourComponent';

//👇 This default export determines where your story goes in the story list
export default {
  component: YourComponent,
};

export const FirstStory = {
  args: {
    //👇 The args you need here will depend on your component
  },
};
```

A `story` is merely a javascript object which hold an `args` key. combination of values for the component's props, which describes how to render the component.  
A `story` needs to be named-exported from the `*stories.js` file.  
A `story` with an empty as an object, will simply mean that all the component's props are undefined.  
The _variable name_ holding the `story` will be the name presented in the Storybook app, describing that `story`, so it's a good idea to have it uppercased.
If a stories.js file does not export a single story, no visuals of that component would appear in the Storybook app. It would be like the component doesn't even exist.

### Docs

The "Docs" page displays auto-generated documentation for components (inferred from the source code). Usage documentation is helpful when sharing reusable components with your team, for example, in an application.

### Storybook & Tailwind

To have Storybook and tailwind working together is rather simple.  
All Storybook needs is a css, generated by tailwind as an output, as its input.  
That same css file needs to be imported in the `preview.js` configuration file of Storybook:

```js title=".storybook/preview.js"
import '../styles/tailwind.css';

/** @type { import('@storybook/react').Preview } */
const preview = {
  parameters: {
    actions: { argTypesRegex: '^on[A-Z].*' },
    controls: {
      matchers: {
        color: /(background|color)$/i,
        date: /Date$/i,
      },
    },
  },
};

export default preview;
```

This will make Tailwind’s style classes available to all of your stories.  
To generate that css file with tailwind, all you gotta do is wrote a script that does so:

```json title="package.json"
{
  "pre-storybook-prod": "npx tailwindcss -o ./styles/tailwind.css --minify"
}
```

This is for production.  
For development, you would most-likely want a `watch` version of that script, so that you could make changes to the source code, and see changes in real-time:

```json title="package.json"
{
  "pre-storybook-dev": "npx tailwindcss -i ./src/index.css -o ./styles/tailwind.css --watch"
}
```

### Storybook With Dark Mode

First of all, update your tailwind.config.js file to change themes based on a class or data-attribute. This example uses a data-attribute.

```js title="tailwind.config.js"
module.exports = {
  content: ['./src/**/*.{js,jsx,ts,tsx}'],
  // Toggle dark-mode based on .dark class or data-mode="dark"
  darkMode: ['class', '[data-theme="dark"]'],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

Next, install the @storybook/addon-themes addon to provide the switcher tool.

```bash
npm i -D @storybook/addon-themes
```

Then, add following content to .storybook/main.js:

```js title=".storybook/main.js"
export default {
  addons: ['@storybook/addon-themes'],
};
```

**Toggle themes by class name**

Add the withThemeByClassName decorator to your Storybook from @storybook/addon-themes:

```js title=".storybook/preview.js"
import { withThemeByClassName } from '@storybook/addon-themes';

/* snipped for brevity */

export const decorators = [
  withThemeByClassName({
    themes: { light: 'light', dark: 'dark' },
    defaultTheme: 'light',
  }),
];
```

**Toggle themes by data-attribute**

Add the withThemeByDataAttribute decorator to your Storybook from @storybook/addon-themes:

```js title=".storybook/preview.js"
import { withThemeByDataAttribute } from '@storybook/addon-themes';

/* snipped for brevity */

export const decorators = [
  withThemeByDataAttribute({
    themes: {
      light: 'light',
      dark: 'dark',
    },
    defaultTheme: 'light',
    attributeName: 'data-mode',
  }),
];
```

### Override theme on the component level

```js title="Button.stories.js"
export default {
  parameters: {
    themes: {
      themeOverride: 'light', // component level override
    },
  },
}
```

### Context Providers

If a particular story has a problem rendering, often it means your component expects a specific environment is available to the component.

A common frontend pattern is for components to assume that they render in a specific "context" with parent components higher up the rendering hierarchy (for instance, theme providers).

Use decorators to “wrap” every story in the necessary context providers. The .storybook/preview.js file allows you to customize how components render in Canvas, the preview iframe. See how you can wrap every component rendered in Storybook with Styled Components ThemeProvider, Vue's Fontawesome, or with an Angular theme provider component in the example below.

```js title=".storybook/preview.js"
import React from 'react';

import { ThemeProvider } from 'styled-components';

export default {
  decorators: [
    (Story) => (
      <ThemeProvider theme="default">
        {/* 👇 Decorators in Storybook also accept a function. Replace <Story/> with Story() to enable it  */}
        <Story />
      </ThemeProvider>
    ),
  ],
};
```

### Public - Static Serve

If you want to link to static files in your project or stories (e.g., /fonts/XYZ.woff), use the `-s path/to/folder` flag to specify a static folder to serve from when you start up Storybook. To do so, edit the storybook and build-storybook scripts in package.json.

We recommend serving external resources and assets requested in your components statically with Storybook. It ensures that assets are always available to your stories.
