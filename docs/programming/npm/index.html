<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-programming/npm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.1">
<title data-rh="true">How to publish your NPM Package | ✨ Super Guides ✨</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://talkohavy.github.io/guides/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://talkohavy.github.io/guides/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://talkohavy.github.io/guides/docs/programming/npm/"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="he"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to publish your NPM Package | ✨ Super Guides ✨"><meta data-rh="true" name="description" content="0. TLDR"><meta data-rh="true" property="og:description" content="0. TLDR"><link data-rh="true" rel="icon" href="/guides/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://talkohavy.github.io/guides/docs/programming/npm/"><link data-rh="true" rel="alternate" href="https://talkohavy.github.io/guides/docs/programming/npm/" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://talkohavy.github.io/guides/he/docs/programming/npm/" hreflang="he"><link data-rh="true" rel="alternate" href="https://talkohavy.github.io/guides/docs/programming/npm/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/guides/blog/rss.xml" title="✨ Super Guides ✨ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/guides/blog/atom.xml" title="✨ Super Guides ✨ Atom Feed"><link rel="stylesheet" href="/guides/assets/css/styles.aed79396.css">
<script src="/guides/assets/js/runtime~main.89e95675.js" defer="defer"></script>
<script src="/guides/assets/js/main.087e6ae0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_RAJn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/guides/"><div class="navbar__logo"><img src="/guides/img/logo.svg" alt="My Site Logo" class="themedComponent_REuZ themedComponent--light_XtwS"><img src="/guides/img/logo_dark.svg" alt="My Site Logo" class="themedComponent_REuZ themedComponent--dark_Hu0z"></div><b class="navbar__title text--truncate">Home</b></a><a class="navbar__item navbar__link" alt="Developer Guides" href="/guides/docs/programming/">Guides</a><a class="navbar__item navbar__link" href="/guides/blog/">Blogs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage__ntr"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/guides/docs/programming/npm/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/guides/he/docs/programming/npm/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="he">עברית</a></li></ul></div><a href="https://github.com/talkohavy/guides/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_RgnN colorModeToggle_VOM9"><button class="clean-btn toggleButton_b5kj toggleButtonDisabled_UIgk" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_YKEb"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_UAZy"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_ZDQZ"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_w5Xt"><div class="docsWrapper_TYYb"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_DXbG" type="button"></button><div class="docRoot_Rc1P"><aside class="theme-doc-sidebar-container docSidebarContainer_Zul0"><div class="sidebarViewport_ElR0"><div class="sidebar_p6f6"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_eYHN"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/guides/docs/category/photoshop-guides/">Photoshop</a><button aria-label="Expand sidebar category &#x27;Photoshop&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/guides/docs/programming/">Programming</a><button aria-label="Collapse sidebar category &#x27;Programming&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/docs/software-concepts/">- Software Concepts</a><button aria-label="Expand sidebar category &#x27;- Software Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/aws-kubernetes/">- AWS Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/crypto/">- Crypto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/css/">- CSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/design-patterns/">- Design Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/docker/">- Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/elasticsearch/">- ElasticSearch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/elk/">- ELK Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/git/">- Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/helm/">- Helm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/kubernetes/">- Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/micro-frontends/">- Micro-Frontends</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/nest/">- NestJS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/node/">- Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/docs/programming/npm/">- npm publish a package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/postgres-sql/">- postgressql</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/python-server/">- Python Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/regex/">- Regex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/saml/">- SAML</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/software-architecture/">- Software Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/ssh/">- SSH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/storybook/">- Storybook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/syntax-highlighting/">- Syntax Highlighting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/programming/what-is-long-polling/">- What is Long-Polling</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/docs/video-editing/ffmpeg/">Video Editing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/docs/job-interview/">MISC</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_N7K1"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_Medn"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_CcUi"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_jEiw"><div class="docItemContainer_iHv0"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k_hA" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/guides/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_Nnpr"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/guides/docs/programming/"><span itemprop="name">Programming</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">- npm publish a package</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_gx8D theme-doc-toc-mobile tocMobile_WRvL"><button type="button" class="clean-btn tocCollapsibleButton_OUiY">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to publish your NPM Package</h1></header>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="0-tldr">0. TLDR<a href="#0-tldr" class="hash-link" aria-label="Direct link to 0. TLDR" title="Direct link to 0. TLDR">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--a-init-a-project">- A. Init a project<a href="#--a-init-a-project" class="hash-link" aria-label="Direct link to - A. Init a project" title="Direct link to - A. Init a project">​</a></h3>
<p>Open terminal, create a folder, give it a meaningful name, and then run:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm init</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or if it should be scoped:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm init --scope=talkohavy</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--b-connect-project-to-github">- B. Connect project to GitHub<a href="#--b-connect-project-to-github" class="hash-link" aria-label="Direct link to - B. Connect project to GitHub" title="Direct link to - B. Connect project to GitHub">​</a></h3>
<p>This step is mandatory. Every npm package needs to be connected to a remote git repo.</p>
<div class="codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-text codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">git remote add origin git@github.com:talkohavy/&lt;name&gt;.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push -u origin master</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--c-add-some-content-to">- C. Add some content to<a href="#--c-add-some-content-to" class="hash-link" aria-label="Direct link to - C. Add some content to" title="Direct link to - C. Add some content to">​</a></h3>
<p>Here are some good options:</p>
<ul>
<li>An <code>src</code> folder with an <code>index.js</code></li>
<li>A <strong>_test_</strong> folder</li>
<li>A README.md file</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--d-create-an-npmrc-file">- D. Create an .npmrc file<a href="#--d-create-an-npmrc-file" class="hash-link" aria-label="Direct link to - D. Create an .npmrc file" title="Direct link to - D. Create an .npmrc file">​</a></h3>
<p>Create an <code>.npmrc</code> file in the root project.</p>
<p>Its contents should be:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">registry=https://registry.example.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//registry.npmjs.org/:_authToken=npm_some-long-hash</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You&#x27;ll of course need to create an <strong>access token</strong> on npm&#x27;s website, under your profile. The token always starts with &quot;npm_&quot;, so it&#x27;s easy to recognize.</p>
<div class="theme-admonition theme-admonition-danger admonition_p331 alert alert--danger"><div class="admonitionHeading_JzKD"><span class="admonitionIcon_hjNE"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_gyVC"><p>Make sure to NOT commit the <code>.npmrc</code> file! The token is highly sensitive!<br>
<!-- -->You must add it to your <code>.gitignore</code>!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--e-create-an-npmignore">- E. create an .npmignore<a href="#--e-create-an-npmignore" class="hash-link" aria-label="Direct link to - E. create an .npmignore" title="Direct link to - E. create an .npmignore">​</a></h3>
<p>At the root of your project create am <code>.npmignore</code> file.<br>
<!-- -->Inside it put:</p>
<div class="codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-text codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">.changeset/</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_p331 alert alert--info"><div class="admonitionHeading_JzKD"><span class="admonitionIcon_hjNE"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_gyVC"><p>When we&#x27;ll create a <code>dist</code> folder, we will cd into it, and run the publish command from there. When we do, we will use <code>changeset</code>&#x27;s publish command, which checks the <code>config.json</code> file under <code>.changeset/</code> folder, so we need to copy it into our dist. However, we don&#x27;t want to include it in our published files, so we exclude it here.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--f-create-a-buildconfigjs-file">- F. Create a build.config.js file<a href="#--f-create-a-buildconfigjs-file" class="hash-link" aria-label="Direct link to - F. Create a build.config.js file" title="Direct link to - F. Create a build.config.js file">​</a></h3>
<p>This fil will serve as your <code>build</code> script.<br>
<!-- -->At the root of your project, create a <code>build.config.js</code> file:</p>
<div class="language-js codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-js codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> execSync </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;child_process&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">fs</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> cpSync </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@typedef</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">{</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">{</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">*</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">   main</span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">:</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> string</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">,</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">*</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">   types</span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">:</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> string</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">,</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">*</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">   </span><span class="token doc-comment comment class-name keyword" style="color:#00009f;font-style:italic">private</span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">?</span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">:</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> string </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">|</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> boolean</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">,</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">*</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">   scripts</span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">?</span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">:</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> Record</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">&lt;</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">string</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">,</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> string</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">,</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">*</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">   publishConfig</span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">:</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">{</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">*</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">     access</span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">:</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">*</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">   </span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">}</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">,</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name operator" style="color:#393A34;font-style:italic">*</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">}</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">}</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">PackageJson</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> outDirName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dist&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">buildPackageConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildPackageConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cleanDistDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">buildWithTsc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">copyReadmeFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">copyChangesetDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">copyNpmIgnore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">copyAndManipulatePackageJsonFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;DONE !!!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cleanDistDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 1: clear the dist directory&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">execSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;rm -rf dist&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildWithTsc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 2: build with vite&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">execSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;tsc -p ./tsconfig.build.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">copyReadmeFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 3: copy the README.md file&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> readStreamReadmeMd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createReadStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./README.md&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> writeStreamReadmeMd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createWriteStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">./</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/README.md</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  readStreamReadmeMd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">writeStreamReadmeMd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">copyAndManipulatePackageJsonFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 4: copy &amp; manipulate the package.json file&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 1: get the original package.json file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/** </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@type</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">{</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">PackageJson</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">}</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> packageJson </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./package.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 2: Remove all scripts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">scripts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-- deleted `scripts` key&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 3: Change from private to public</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">private</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">publishConfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">access</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;public&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-- changed from private to public&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-- changed publishConfig access to public&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 4: remove &#x27;outDirName/&#x27; from &quot;main&quot; &amp; &quot;types&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">main</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">main</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">types</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">types</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 5: create new package.json file in the output folder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">./</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/package.json</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">packageJson</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-- package.json file written successfully!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">copyChangesetDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 5: copy the .changeset directory&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cpSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.changeset&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/.changeset</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">recursive</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">copyNpmIgnore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 6: copy the .npmignore file&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cpSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.npmignore&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/.npmignore</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--g-install-changesetscli">- G. install Changesets/cli<a href="#--g-install-changesetscli" class="hash-link" aria-label="Direct link to - G. install Changesets/cli" title="Direct link to - G. install Changesets/cli">​</a></h3>
<p>The flow of versioning is made easy with a tool like <code>changesets/cli</code>.</p>
<p>Install it:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm add -D @changesets/cli</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Init it:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm changeset init</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Change the content of <code>.changeset/config.json</code> file:</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG codeBlockLinesWithNumbering_NE6T"><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;$schema&quot;: &quot;https://unpkg.com/@changesets/config@3.0.2/schema.json&quot;,</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;changelog&quot;: &quot;@changesets/cli/changelog&quot;,</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;commit&quot;: true,</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;fixed&quot;: [],</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;linked&quot;: [],</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;access&quot;: &quot;public&quot;,</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;baseBranch&quot;: &quot;master&quot;,</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;updateInternalDependencies&quot;: &quot;patch&quot;,</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;ignore&quot;: []</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add the scripts:</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scripts&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;clean&quot;: &quot;rm -rf node_modules&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;lint&quot;: &quot;eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;format-check&quot;: &quot;prettier . --check --config .prettierrc.mjs --ignore-path .prettierignore&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;format&quot;: &quot;prettier . --write --log-level silent --config .prettierrc.json --ignore-path .prettierignore&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;test&quot;: &quot;node --test&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;build&quot;: &quot;node build.config.js&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-add&quot;: &quot;pnpm changeset add&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-bump&quot;: &quot;npm run test &amp;&amp; pnpm changeset version &amp;&amp; npm run cs-bump-reset-format-commit&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-bump-reset-format-commit&quot;: &quot;git reset head~1 &amp;&amp; npm run format &amp;&amp; git add . &amp;&amp; git commit -m &#x27;RELEASING: Releasing 1 package(s)&#x27;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-status&quot;: &quot;pnpm changeset status --verbose&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-publish&quot;: &quot;pnpm run build &amp;&amp; cd dist &amp;&amp; pnpm changeset publish&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;prepublishOnly&quot;: &quot;npm run build&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--h-edit-your-packagejson">- H. Edit your package.json<a href="#--h-edit-your-packagejson" class="hash-link" aria-label="Direct link to - H. Edit your package.json" title="Direct link to - H. Edit your package.json">​</a></h3>
<p>Change these keys in your <code>package.json</code> file:</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG codeBlockLinesWithNumbering_NE6T"><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;name&quot;: &quot;@talkohavy/dashboard&quot;,</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;private&quot;: true,</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;version&quot;: &quot;0.0.0&quot;,</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;type&quot;: &quot;module&quot;,</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;main&quot;: &quot;dist/main.js&quot;,</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;types&quot;: &quot;dist/main.d.ts&quot;,</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;scripts&quot;: {},</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;publishConfig&quot;: {</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">    &quot;registry&quot;: &quot;https://registry.npmjs.org/&quot;,</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">    &quot;access&quot;: &quot;restricted&quot;</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  },</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  &quot;devDependencies&quot;: {},</span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--i-your-new-workflow">- I. Your new workflow<a href="#--i-your-new-workflow" class="hash-link" aria-label="Direct link to - I. Your new workflow" title="Direct link to - I. Your new workflow">​</a></h3>
<p>• Step 1: Open a <code>side-branch</code>, make changes &amp; commit them.
• Step 2: Run the command <code>npm run cs-add</code>, choose a semver, and add a short description.
• Step 3: Run the command <code>npm run cs-add</code>, choose a semver, and add a short description of what has been done.
• Step 4: Make a pull request to the <code>master</code> branch.
• Step 5: It&#x27;s up to the master branch (the CICD pipeline) to bump the version, with <code>npm run cs-bump</code>. This creates a new commit.
• Step 6: Also, it&#x27;s up to the master branch (the CICD pipeline) to publish the version, with <code>npm run cs-publish</code>. This does NOT create a new commit.</p>
<p>The <strong>publish</strong> command of changesets looks at the <code>config.json</code> file under <code>.changesets</code>, and makes a publish based on the instruction given to it there.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="1-init-a-project-packagejson">1. Init a project package.json<a href="#1-init-a-project-packagejson" class="hash-link" aria-label="Direct link to 1. Init a project package.json" title="Direct link to 1. Init a project package.json">​</a></h2>
<p>Create a new folder, and init a git project (Give it a meaningful name).</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm init</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can prefix your packages, just like @redux-toolkit or @babel did, with @some-name at the beginning.<br>
<!-- -->If you wish to <em>prefix</em> your package, you can do so manually <em>post</em> initialization, or you can do so <em>during</em> the init process, using the <code>scope</code> flag:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm init --scope=talkohavy</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will have your package scoped.<br>
<!-- -->For example, the above package would get a prefix of &quot;@talkohavy/&quot; added to its name.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="2-connect-project-to-github">2. Connect project to GitHub<a href="#2-connect-project-to-github" class="hash-link" aria-label="Direct link to 2. Connect project to GitHub" title="Direct link to 2. Connect project to GitHub">​</a></h2>
<p>This step is mandatory. Every npm package needs to be connected to a remote git repo.</p>
<div class="codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-text codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">git init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m &#x27;first commit&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git remote add origin git@github.com:talkohavy/&lt;name&gt;.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push -u origin master</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="3-add-some-content-to-the-package">3. Add some content to the Package<a href="#3-add-some-content-to-the-package" class="hash-link" aria-label="Direct link to 3. Add some content to the Package" title="Direct link to 3. Add some content to the Package">​</a></h2>
<p>Create the following structure:</p>
<ul>
<li>An <code>src</code> directory with an <code>index.js</code></li>
<li>A <strong>_test_</strong> folder</li>
<li>A README.md file</li>
</ul>
<p>And later on:</p>
<ul>
<li>build.config.js</li>
<li>jsconfig.json</li>
<li>.npmrc</li>
<li>Changesets-cli</li>
<li>Eslint</li>
<li>Prettier</li>
<li>Husky</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="4-develop-a-build-process">4. Develop a build process<a href="#4-develop-a-build-process" class="hash-link" aria-label="Direct link to 4. Develop a build process" title="Direct link to 4. Develop a build process">​</a></h2>
<p>While you <em>can</em> serve the root of the project as the package itself, it is not recommended. There are a lot of things you&#x27;ll need to blacklist from ending up in the final output being packaged up and be published to npm.</p>
<p>Even if you&#x27;ll go with the whitelist approach, instead of the blacklist approach, by using the &quot;files&quot; within the package.json, it is still recommended to avoid serving the root directory (whether its the src or some dist folder). This is because whitelisting is something you need to maintain, and every time you&#x27;ll add a new feature you&#x27;ll need to go inside the package.json and update it there.</p>
<p>Instead, we will go with the <code>divide &amp; conquer</code> approach.</p>
<p>The <code>divide &amp; conquer</code> approach dictates that the repo used to develop the package will be separated from the package that will be shipped to npm.</p>
<p>Any package that is designed to be published will have the following steps:</p>
<ol>
<li>Clear the dist folder (<code>rm -rf dist</code>).</li>
<li>Build the project (minify/compile/transpile, i.e. <code>tsc -p tsconfig.json</code>).</li>
<li>Copy &amp; manipulate the <code>package.json</code>.</li>
</ol>
<p>The benefits of the <code>divide &amp; conquer</code> approach:</p>
<ol>
<li>You don&#x27;t have to whitelist anything.</li>
<li>You don&#x27;t have to blacklist anything.</li>
<li>package.json include ONLY what it needs to thanks to the act of manipulation.</li>
<li>Complete control of the package&#x27;s structure - the output&#x27;s end result.</li>
<li>Complete separation between structures (the root and the package).</li>
</ol>
<p>The name <code>divide &amp; conquer</code> isn&#x27;t an industry term, rather than a name I gave to this approach.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="5-npm-login-npm-logout-npmrc--npmignore">5. npm login, npm logout, .npmrc &amp; .npmignore<a href="#5-npm-login-npm-logout-npmrc--npmignore" class="hash-link" aria-label="Direct link to 5. npm login, npm logout, .npmrc &amp; .npmignore" title="Direct link to 5. npm login, npm logout, .npmrc &amp; .npmignore">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--a-npm-login--npmrc">- A. npm login &amp; .npmrc<a href="#--a-npm-login--npmrc" class="hash-link" aria-label="Direct link to - A. npm login &amp; .npmrc" title="Direct link to - A. npm login &amp; .npmrc">​</a></h3>
<p>Publishing a package to npm requires you to be logged into npm.</p>
<p>You can log into npm by running:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm login</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After running this command you&#x27;ll be asked to hit enter, and a browser will open up. There, you&#x27;ll have to enter a 6-digit otp, which appears on an authenticator up you have connected to your npm account beforehand.</p>
<p>But what about CI/CD?</p>
<p>A CI/CD process can&#x27;t run <code>npm login</code>.<br>
<!-- -->This is where <code>.npmrc</code> comes into the picture.<br>
<!-- -->A configuration file for npm.</p>
<p>The <code>.npmrc</code> file can be:</p>
<ul>
<li>per project (found at the project&#x27;s root directory)</li>
<li>per user (found at the ~/.npmrc)</li>
<li>global config file (found at $PREFIX/etc/npmrc)</li>
</ul>
<p>The <code>.npmrc</code> file will contain a <em>token</em> which will be used to publish our package without having to log in using the <code>npm login</code> command.</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">registry=https://registry.example.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//registry.npmjs.org/:_authToken=npm_some-long-hash</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You&#x27;ll of course need to create an <strong>access token</strong> on npm&#x27;s website, under your profile. The token always starts with &quot;npm_&quot;, so it&#x27;s easy to recognize.</p>
<div class="theme-admonition theme-admonition-danger admonition_p331 alert alert--danger"><div class="admonitionHeading_JzKD"><span class="admonitionIcon_hjNE"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_gyVC"><p>Make sure to NOT commit the <code>.npmrc</code> file! The token is highly sensitive!<br>
<!-- -->You must add it to your <code>.gitignore</code>!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--b-npm-logout">- B. npm logout<a href="#--b-npm-logout" class="hash-link" aria-label="Direct link to - B. npm logout" title="Direct link to - B. npm logout">​</a></h3>
<p>Just as there is a command of <code>npm login</code> to get you logged in, there&#x27;s also a command to logout:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm logout</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is <strong>SUPER</strong> important to know this command and understand what it does under the hood, because it&#x27;s not so straightforward.</p>
<p>Not only that <code>npm logout</code> logs you out, it also <strong>DELETES</strong> the .npmrc file. So if you find yourself asking &quot;where did my npmrc file go?&quot;, it could very much be that you ran <code>npm logout</code>, which deleted your file.</p>
<p>Another important piece of information is: if you had a token that should last a year, and you just committed an <code>npm logout</code>, you have invalidated your token permanently! And it can no longer be used!</p>
<p>To sum it up, npm logout does 2 things:</p>
<ol>
<li>It deleted the line which includes the token from your .npmrc file.<!-- -->
<ul>
<li>If your <code>.npmrc</code> file contains only that 1 line with the token, the .npmrc file is deleted for good.</li>
</ul>
</li>
<li>It invalidates the token.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--c-npmignore">- C. .npmignore<a href="#--c-npmignore" class="hash-link" aria-label="Direct link to - C. .npmignore" title="Direct link to - C. .npmignore">​</a></h3>
<p>You can use the <code>.npmignore</code> to blacklist files and folders from getting to the final package output that&#x27;ll be published on npm.</p>
<p>However, since we&#x27;ll be using the <code>divide &amp; conquer</code> approach, the use of <code>.npmignore</code> will be minimal, if any.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--d-npm-login-deep-dive">- D. npm login Deep Dive<a href="#--d-npm-login-deep-dive" class="hash-link" aria-label="Direct link to - D. npm login Deep Dive" title="Direct link to - D. npm login Deep Dive">​</a></h3>
<p>When you run <code>npm login</code>, an <code>.npmrc</code> file is created (or is being updated if it already exists) with a fresh new token. This means that if a previous existing (either by <code>npm login</code> or by copy-pasting a generated <em>Access Token</em> from npm), it is now gone. Erased.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="6-versioning">6. Versioning<a href="#6-versioning" class="hash-link" aria-label="Direct link to 6. Versioning" title="Direct link to 6. Versioning">​</a></h2>
<p>A common error you&#x27;ll bump into is when you&#x27;ll try to re-publish a package using the same version already registered on npm.</p>
<p>Before running the <code>publish</code> command, you&#x27;ll need to bump the version.<br>
<!-- -->In fact, that&#x27;s the <em>only</em> change that&#x27;s required by npm in order to be able to publish a new release.</p>
<p>To bump a version there are 3 commands ou can use:</p>
<p>When doing a bugfix:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm version patch -m &#x27;Upgrade to %s: some-message&#x27;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When adding a new feature:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm version minor -m &#x27;Upgrade to %s: some-message&#x27;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When doing a breaking-change:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm version major -m &#x27;Upgrade to %s: some-message&#x27;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In order to run either one of these, your git tree must be clean. If it&#x27;s not, you&#x27;ll get an error telling you to stash your changes and then try again.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="7-the-role-of-packagejson">7. The role of package.json<a href="#7-the-role-of-packagejson" class="hash-link" aria-label="Direct link to 7. The role of package.json" title="Direct link to 7. The role of package.json">​</a></h2>
<p>The <code>package.json</code> file plays a huge role when it comes to publishing a package on npm.</p>
<p>It contains keys/fields, that could make or break the publish&#x27;s output.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--a-required-keys-within-your-packagejson">- A. <strong>REQUIRED</strong> keys within your <code>package.json</code><a href="#--a-required-keys-within-your-packagejson" class="hash-link" aria-label="Direct link to --a-required-keys-within-your-packagejson" title="Direct link to --a-required-keys-within-your-packagejson">​</a></h3>
<ul>
<li>name</li>
<li>version</li>
<li>main</li>
</ul>
<p>Your <code>package.json</code> MUST include a <code>name</code>, a <code>version</code>, and a <code>main</code>.<br>
<!-- -->While the lack of <code>name</code>, a <code>version</code> would fail the <em>publish</em> process, the lack of main would not. However, you would not be able to import <em>anything</em> from the end result package! You would even get a runtime error if you try.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--b-important-keys-inside-your-packagejson">- B. <strong>IMPORTANT</strong> keys inside your <code>package.json</code><a href="#--b-important-keys-inside-your-packagejson" class="hash-link" aria-label="Direct link to --b-important-keys-inside-your-packagejson" title="Direct link to --b-important-keys-inside-your-packagejson">​</a></h3>
<ul>
<li>exports</li>
<li>files</li>
</ul>
<p>The <code>exports</code> field in package.json is a relatively new addition to the npm ecosystem. It allows you as the package&#x27;s author to explicitly define which modules are available for consumption when the package is imported. This helps in providing a more controlled and secure interface, limiting access to internal files that shouldn&#x27;t be exposed to end-users.<br>
<!-- -->The <code>exports</code> field <strong>OVERRIDES</strong> whatever that is written under the <code>main</code> key, and can replace it entirely.</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // &quot;main&quot;: &quot;lib/index.js&quot;, // &lt;--- not needed now that exports exists. Has no affect.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;exports&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;.&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;import&quot;: &quot;./lib/index.js&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;require&quot;: &quot;./lib/index.cjs&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>files</code> key is mean for whitelisting. Only files specified under files will end up in the end-result output of the publish.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--c-nice-to-have-keys-inside-your-packagejson">- C. <strong>Nice to have</strong> keys inside your <code>package.json</code><a href="#--c-nice-to-have-keys-inside-your-packagejson" class="hash-link" aria-label="Direct link to --c-nice-to-have-keys-inside-your-packagejson" title="Direct link to --c-nice-to-have-keys-inside-your-packagejson">​</a></h3>
<ul>
<li>repository</li>
<li>publishConfig<!-- -->
<ul>
<li>registry</li>
<li>access</li>
</ul>
</li>
<li>license (MIT, ISC, etc.)</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="8-publishing-a-package-to-an-npm-registry">8. Publishing a package to an npm registry<a href="#8-publishing-a-package-to-an-npm-registry" class="hash-link" aria-label="Direct link to 8. Publishing a package to an npm registry" title="Direct link to 8. Publishing a package to an npm registry">​</a></h2>
<p>Now that everything is set, it&#x27;s time we upload/publish our package to our npm registry.</p>
<p>You can publish the package by running the command:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm publish</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To help you visualize what exactly is going to be publish, you can run a dry-run publish command:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm publish --dry-run</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will spit out all sorts of useful information.</p>
<p>By default, scoped packages are published with private visibility. To publish a scoped package with public visibility, use npm publish --access public.</p>
<div class="theme-admonition theme-admonition-note admonition_p331 alert alert--secondary"><div class="admonitionHeading_JzKD"><span class="admonitionIcon_hjNE"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_gyVC"><p>Note: You cannot change the visibility of an unscoped package. Only scoped packages with a paid subscription may be private.</p></div></div>
<p>If your package is prefixed (i.e. scoped with @talkohavy), you&#x27;ll have to add the access public flag:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm publish --access=public</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Without the access public flag, you&#x27;ll get an error saying you must sign up for private packages, and the the publish command will fail.<br>
<!-- -->This is because when trying to publish, by default, npm thinks you&#x27;re trying to publish a private package. You can fix this by adding the <code>access</code> flag to the publish command, and setting it to <em>public</em>, telling npm that this package is in fact public.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="9-a-publishs-output---deep-dive-strategy">9. A publish&#x27;s output - Deep Dive Strategy<a href="#9-a-publishs-output---deep-dive-strategy" class="hash-link" aria-label="Direct link to 9. A publish&#x27;s output - Deep Dive Strategy" title="Direct link to 9. A publish&#x27;s output - Deep Dive Strategy">​</a></h2>
<p>Earlier in this guide we talked about the <code>divide &amp; conquer</code> approach, where separate the package&#x27;s output to be published from the repo itself.</p>
<p>Let&#x27;s take a deep-dive into what it actually means.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--a-a-second-packagejson">- A. A second package.json<a href="#--a-a-second-packagejson" class="hash-link" aria-label="Direct link to - A. A second package.json" title="Direct link to - A. A second package.json">​</a></h3>
<p>In the build process, we create a <code>dist</code> folder. If we were to use the the <code>main</code> key within our package.json that resides in our root directory, to point to an index.js file within our <code>dist</code> folder, it would result in that <code>dist</code> folder appearing in our end result output. But what if we don&#x27;t to see a <code>dist</code> folder as part of our end result? What if we wanted to see just a single file in there?</p>
<p>To that goal, and in order to achieve maximum control over our final structure, we would have ourselves a second <code>package.json</code>. This is what we called earlier as &quot;Copy &amp; manipulate the package.json&quot;.</p>
<p>In this step, we take the package.json found in our root directory, and copy it into our dist folder. Not before we manipulate it a bit though. The manipulation can have multiple benefits:</p>
<ol>
<li><strong>We can remove scripts</strong> - stuff like &quot;test&quot; or &quot;lint&quot;. They are no longer needed.</li>
<li><strong>We can change access</strong> - We can have the initial package.json start off as &quot;restricted&quot;, thus ensuring one can&#x27;t accidentally publish the root as a package, and only during manipulation change it to &quot;public&quot;.</li>
<li><strong>We can change the private boolean</strong> - We can have the initial package.json start off as <code>&quot;private&quot;: true</code>, which is another way to ensure that no one can publish the root as a package, and only during manipulation, we remove this key entirely.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--b-a-readmemd-file">- B. A README.md file<a href="#--b-a-readmemd-file" class="hash-link" aria-label="Direct link to - B. A README.md file" title="Direct link to - B. A README.md file">​</a></h3>
<p>Copy the readme.md file <em>as-is</em> to the <code>dist</code> folder. This readme file will appear on npm main page of the package, serving as a Getting-Started information on how-to-use the package to other developers.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--c-main-types--exports-pointing">- C. main, types &amp; exports pointing<a href="#--c-main-types--exports-pointing" class="hash-link" aria-label="Direct link to - C. main, types &amp; exports pointing" title="Direct link to - C. main, types &amp; exports pointing">​</a></h3>
<p>Since I know that there&#x27;s going to be another package.json generated within the dist folder, the pointing on the keys &quot;main&quot;, &quot;types&quot;, and &quot;exports&quot; should be in relation to <em>that</em> package.json.</p>
<p>Let&#x27;s say you have this project structure:</p>
<div class="codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-text codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">|-- src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- dist/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |-- lib/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |-- index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |-- index.d.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |-- package.json (copied &amp; manipulated)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |-- README.md (copied)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- README.md</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the example case above, the pointing of &quot;main&quot; should NOT be &quot;dist/lib/index.js&quot;, but rather &quot;lib/index.js&quot;. Same for &quot;types&quot;, it should be &quot;index.d.js&quot;. Same goes for exports:</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;exports&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;.&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;import&quot;: &quot;./lib/index.js&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;require&quot;: &quot;./lib/index.cjs&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--d-a-complete-build-process">- D. A complete build process<a href="#--d-a-complete-build-process" class="hash-link" aria-label="Direct link to - D. A complete build process" title="Direct link to - D. A complete build process">​</a></h3>
<p>What I like to do is create a <code>build.config.js</code> at the root of the project, and have it look like so:</p>
<div class="language-js codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-js codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> execSync </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;child_process&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">fs</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> outDirName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dist&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">buildPackageConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildPackageConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cleanDistDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">buildWithTsc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">copyReadmeFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">copyAndManipulatePackageJsonFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;DONE !!!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cleanDistDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 1: clear the dist directory&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">execSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;rm -rf dist&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildWithTsc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 2: build with tsc&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">execSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;tsc -p jsconfig.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">copyReadmeFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 3: copy the README.md file&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> readStreamReadmeMd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createReadStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./README.md&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> writeStreamReadmeMd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createWriteStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">./</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/README.md</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  readStreamReadmeMd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">writeStreamReadmeMd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">copyAndManipulatePackageJsonFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 4: copy &amp; manipulate the package.json file&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 1: get the original package.json file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> packageJson </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./package.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 2: Remove all scripts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">scripts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-- deleted `scripts` key&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 3: Change from private to public</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">private</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  packageJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">publishConfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">access</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;public&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-- changed from private to public&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-- changed publishConfig access to public&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 4: create new package.json file in the output folder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">./</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/package.json</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">packageJson</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-- package.json file written successfully!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And now i&#x27;m just adding the following script:</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scripts&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;build&quot;: &quot;node build.config.js&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--e-the-publish-command-as-a-script">- E. The publish command as a script<a href="#--e-the-publish-command-as-a-script" class="hash-link" aria-label="Direct link to - E. The publish command as a script" title="Direct link to - E. The publish command as a script">​</a></h3>
<p>And finally, i&#x27;ll create a script that looks like:</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scripts&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;pub&quot;: &quot;npm run build &amp;&amp; cd dist &amp;&amp; npm publish&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="10-typescript-types">10. Typescript Types<a href="#10-typescript-types" class="hash-link" aria-label="Direct link to 10. Typescript Types" title="Direct link to 10. Typescript Types">​</a></h2>
<p>When you involve typescript, everything changes. New behaviors are introduced, and subtle differences are brought to the table.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--a-emitting-pure-javascript">- A. Emitting Pure Javascript<a href="#--a-emitting-pure-javascript" class="hash-link" aria-label="Direct link to - A. Emitting Pure Javascript" title="Direct link to - A. Emitting Pure Javascript">​</a></h3>
<p>If your package emits a plain javascript, without so much as a declaration file (.d.ts file) then nothing changes for you. Everything will work as expected.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--b-emitting-js--dts-files">- B. Emitting .js &amp; .d.ts files<a href="#--b-emitting-js--dts-files" class="hash-link" aria-label="Direct link to - B. Emitting .js &amp; .d.ts files" title="Direct link to - B. Emitting .js &amp; .d.ts files">​</a></h3>
<p>This is the most common use-case.</p>
<p>When writing a package in typescript, you&#x27;ll end up needing to compile it down to javascript. Doesn&#x27;t matter which tool you use, under the hood they all use <strong>tsc</strong>, so I&#x27;ll be using it directly.</p>
<p>The end result of the compilation process will create a <code>dist</code> folder, along with some js files, and a main declaration file - <code>index.d.ts</code>. There can be other declaration files emitted during the process, which will be sibling to that <code>index.d.ts</code>.</p>
<p>In this setting, where there are .d.ts files in the final output, there are some subtle differences.</p>
<p><strong>The difference between &quot;exports&quot; and &quot;main&quot;</strong></p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--c-using-only-ts-files">- C. Using ONLY .ts files<a href="#--c-using-only-ts-files" class="hash-link" aria-label="Direct link to - C. Using ONLY .ts files" title="Direct link to - C. Using ONLY .ts files">​</a></h3>
<p>Let&#x27;s compare 3 cases:</p>
<ol>
<li>Having an only js package with <code>&quot;main&quot;: &quot;lib/index.js&quot;</code>,</li>
<li>Having an only js package with <code>&quot;exports&quot;: {&quot;.&quot;: { &quot;import&quot;: &quot;./lib/index.js&quot; }}</code></li>
<li>Having Case 1 with <code>&quot;types&quot;: &quot;index.d.ts&quot;</code></li>
<li>Having Case 2 with <code>&quot;types&quot;: &quot;index.d.ts&quot;</code></li>
</ol>
<p>First of all, it is important to know - not including a <code>&quot;types&quot;: &quot;index.d.ts&quot;</code>, in your <code>package.json</code>, doesn&#x27;t mean that it defaults to nothing. In fact, the defaults <em>is</em> <code>&quot;types&quot;: &quot;index.d.ts&quot;</code>!</p>
<p>The &quot;types&quot; field only exists for when you have a root .d.ts file with a name that&#x27;s outside the convention on <code>index.d.ts</code>, or that it is located deeper in some nested folder, and not on the root.</p>
<p>By default, using the <code>exports</code> key sets every possible key that can be added under it to null.</p>
<p>&quot;.&quot;</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="11-auto-completion--auto-suggestion">11. Auto-Completion &amp; Auto-Suggestion<a href="#11-auto-completion--auto-suggestion" class="hash-link" aria-label="Direct link to 11. Auto-Completion &amp; Auto-Suggestion" title="Direct link to 11. Auto-Completion &amp; Auto-Suggestion">​</a></h2>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="12-versioning-helper---changesetscli">12. Versioning Helper - Changesets/cli<a href="#12-versioning-helper---changesetscli" class="hash-link" aria-label="Direct link to 12. Versioning Helper - Changesets/cli" title="Direct link to 12. Versioning Helper - Changesets/cli">​</a></h2>
<p>While you can use <code>npm version patch/minor/major</code>, it&#x27;s impractical.</p>
<p>The flow of versioning is made easy with the help of a tool called <code>changesets/cli</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--a-getting-started">- A. Getting Started<a href="#--a-getting-started" class="hash-link" aria-label="Direct link to - A. Getting Started" title="Direct link to - A. Getting Started">​</a></h3>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm install -D @changesets/cli</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or...</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm add -D @changesets/cli</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If this is your first time using changesets in this project, run this:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm changeset init</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will create a <code>.changeset</code> folder with 2 files inside:</p>
<ul>
<li>config.json</li>
<li>README.md</li>
</ul>
<p>The config file is filled with all sorts of helpful configurations and tooltips explaining what each one does.</p>
<p>Two things you&#x27;ll most definitely want/need to change are:</p>
<ol>
<li>&quot;baseBranch&quot;: &quot;main&quot;, which determines the branch that Changesets uses when finding what packages have changed. If you set a branch name that doesn&#x27;t exists, the process will fail.</li>
<li>&quot;commit&quot;: false, set it to <code>true</code> instead.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--b-add-new-scripts-to-packagejson">- B. Add new scripts to package.json<a href="#--b-add-new-scripts-to-packagejson" class="hash-link" aria-label="Direct link to - B. Add new scripts to package.json" title="Direct link to - B. Add new scripts to package.json">​</a></h3>
<p>Add these new scripts to your package.json:</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scripts:&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-add&quot;: &quot;pnpm changeset add&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-bump&quot;: &quot;pnpm changeset version&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-status&quot;: &quot;pnpm changeset status --verbose&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-publish&quot;: &quot;cd dist &amp;&amp; pnpm changeset publish&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--c-add-copy-changeset-to-your-copy-flow">- C. Add copy changeset to your copy flow<a href="#--c-add-copy-changeset-to-your-copy-flow" class="hash-link" aria-label="Direct link to - C. Add copy changeset to your copy flow" title="Direct link to - C. Add copy changeset to your copy flow">​</a></h3>
<div class="language-js codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-js codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG codeBlockLinesWithNumbering_NE6T"><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token comment" style="color:#999988;font-style:italic">/* eslint-disable */</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> execSync </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;child_process&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">fs</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> cpSync </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> outDirName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dist&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token function" style="color:#d73a49">buildPackageConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildPackageConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cleanDistDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token function" style="color:#d73a49">copyChangesetDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token function" style="color:#d73a49">copyNpmIgnore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;DONE !!!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">copyChangesetDirectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 5: copy the .changeset directory&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cpSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.changeset&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/.changeset</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">recursive</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">copyNpmIgnore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;- Step 6: copy the .npmignore file&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cpSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.npmignore&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">outDirName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/.npmignore</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_kYmc" style="color:#393A34"><span class="codeLineNumber_WAhT"></span><span class="codeLineContent_hB5O"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="--d-versioning-flow---how-to-use">- D. Versioning Flow - How to use<a href="#--d-versioning-flow---how-to-use" class="hash-link" aria-label="Direct link to - D. Versioning Flow - How to use" title="Direct link to - D. Versioning Flow - How to use">​</a></h3>
<p>Once you&#x27;ve completed the initial setup, the flow is very simple:</p>
<h4 class="anchor anchorWithStickyNavbar_gWk7" id="step-1-make-changes--commit-them">Step 1: Make changes &amp; commit them<a href="#step-1-make-changes--commit-them" class="hash-link" aria-label="Direct link to Step 1: Make changes &amp; commit them" title="Direct link to Step 1: Make changes &amp; commit them">​</a></h4>
<p>Adding a new feature, fixing a bug, or having breaking changes are the only time that this flow is valid. Needless to say that usually when doing either one of these you are standing on a <code>side-branch</code>, away from <code>master</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_p331 alert alert--secondary"><div class="admonitionHeading_JzKD"><span class="admonitionIcon_hjNE"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_gyVC"><p>You DO NOT publish a new version of your package simply because you added eslint, or prettier! Theses aren&#x27;t bugs, or feature that affect the end result package!</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_gWk7" id="step-2-run-the-changeset-add-command">Step 2: Run the changeset ADD command<a href="#step-2-run-the-changeset-add-command" class="hash-link" aria-label="Direct link to Step 2: Run the changeset ADD command" title="Direct link to Step 2: Run the changeset ADD command">​</a></h4>
<p>When all commits are done, it&#x27;s then time to log what has been done.</p>
<p>Run the newly created script:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm run cs-add</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Choose the semver, and give a short description of what has been done.</p>
<p>You <em>can</em>, and sometimes <em>should</em>, run the &quot;cs-add&quot; command several times, once for each change that has been made for this current release.</p>
<p>Each time you run the &quot;cs-add&quot; command, an md file with some weird name will be created under the <code>.changesets</code> directory.</p>
<h4 class="anchor anchorWithStickyNavbar_gWk7" id="step-3-run-the-changeset-status-command">Step 3: Run the changeset STATUS command<a href="#step-3-run-the-changeset-status-command" class="hash-link" aria-label="Direct link to Step 3: Run the changeset STATUS command" title="Direct link to Step 3: Run the changeset STATUS command">​</a></h4>
<p>To view everything that&#x27;s going to be added to this release using the ADD command, you can use the STATUS command:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm run cs-status</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_gWk7" id="step-4-run-the-changeset-version-command">Step 4: Run the changeset VERSION command<a href="#step-4-run-the-changeset-version-command" class="hash-link" aria-label="Direct link to Step 4: Run the changeset VERSION command" title="Direct link to Step 4: Run the changeset VERSION command">​</a></h4>
<p>When you&#x27;re ready to bump the version, with all the logs you&#x27;ve made, run the BUMP script we&#x27;ve added earlier:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm run cs-bump</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This action will take all those md files with weird names, calculate the version number, create or update the CHANGELOG.md file with everything you wrote as notes, and then delete all those weird named files, as they&#x27;ve already served their purpose. These files are meant to be temporary. Their only role is to serve as information guide to the VERSION command.</p>
<h4 class="anchor anchorWithStickyNavbar_gWk7" id="step-5-run-the-changeset-publish-command">Step 5: Run the changeset PUBLISH command<a href="#step-5-run-the-changeset-publish-command" class="hash-link" aria-label="Direct link to Step 5: Run the changeset PUBLISH command" title="Direct link to Step 5: Run the changeset PUBLISH command">​</a></h4>
<p>The <strong>PUBLISH</strong> command of changesets looks at the <code>config.json</code> file under <code>.changesets</code>, and makes a publish based on the instruction given to it there.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="13-finalize-process---test--build">13. Finalize Process - test &amp; build<a href="#13-finalize-process---test--build" class="hash-link" aria-label="Direct link to 13. Finalize Process - test &amp; build" title="Direct link to 13. Finalize Process - test &amp; build">​</a></h2>
<p>In order to have the flow easy, let&#x27;s make sure we are running as few script as possible, in a way that makes sense.</p>
<p>Look at the following snippet from my package.json:</p>
<div class="language-json codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-json codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scripts&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;clean&quot;: &quot;rm -rf dist&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;test&quot;: &quot;node --test&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;build-full&quot;: &quot;node build.config.js&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-add&quot;: &quot;pnpm changeset add&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-bump&quot;: &quot;npm test &amp;&amp; pnpm changeset version&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-status&quot;: &quot;pnpm changeset status --verbose&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cs-publish&quot;: &quot;pnpm run build-full &amp;&amp; cd dist &amp;&amp; pnpm changeset publish&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice that right before running the &quot;bump&quot; command, that&#x27;s when I&#x27;m running my tests, so there can never be a version upgrade when tests are failing.</p>
<p>Notice that right before running the &quot;publish&quot; command, that&#x27;s when I&#x27;m running the full-build process that creates the dist folder, along with everything needed for its publish. Since the publish itself is tightly coupled with the output of the build process, it made sense to chain them together.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_gWk7" id="999-check-locally-using-pnpm-link---global">999. Check locally using <code>pnpm link --global</code><a href="#999-check-locally-using-pnpm-link---global" class="hash-link" aria-label="Direct link to 999-check-locally-using-pnpm-link---global" title="Direct link to 999-check-locally-using-pnpm-link---global">​</a></h2>
<p>Before publishing a package to npm, you can test it locally by importing it to a side-project, and check that it works.<br>
<!-- -->For that we use the command <code>pnpm link --global</code> (original command is <code>npm link</code>).</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="-step-1-run-pnpm-link-on-the-to-be-published-package">• Step 1: Run <code>pnpm link</code> on the to-be-published package<a href="#-step-1-run-pnpm-link-on-the-to-be-published-package" class="hash-link" aria-label="Direct link to -step-1-run-pnpm-link-on-the-to-be-published-package" title="Direct link to -step-1-run-pnpm-link-on-the-to-be-published-package">​</a></h3>
<p>Inside the to-be-published package folder, run the following command:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm link --global</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm link</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>depending on what you&#x27;re going to use on the tester project.</p>
<p>Running <code>npm link</code> symlinks a package folder. This is handy for installing your own stuff, so that you can work on it and test iteratively without having to continually rebuild.</p>
<h3 class="anchor anchorWithStickyNavbar_gWk7" id="-step-2-run-pnpm-link-pkg-name-on-the-tester-project">• Step 2: Run <code>pnpm link pkg-name</code> on the tester project<a href="#-step-2-run-pnpm-link-pkg-name-on-the-tester-project" class="hash-link" aria-label="Direct link to -step-2-run-pnpm-link-pkg-name-on-the-tester-project" title="Direct link to -step-2-run-pnpm-link-pkg-name-on-the-tester-project">​</a></h3>
<p>Create a dummy project somewhere on your machine, and do:</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm init -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pnpm link &lt;pkg-name&gt;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or...</p>
<div class="language-bash codeBlockContainer_Gi3m theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QB9L"><pre tabindex="0" class="prism-code language-bash codeBlock_FPJv thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZxGG"><span class="token-line" style="color:#393A34"><span class="token plain">npm init -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm link &lt;pkg-name&gt;</span><br></span></code></pre><div class="buttonGroup_KXtX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_VUb8" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_BOMJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xGLn"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the dummy project, create a quick script which imports the to-be-published package, and test it.</p>
<div class="theme-admonition theme-admonition-info admonition_p331 alert alert--info"><div class="admonitionHeading_JzKD"><span class="admonitionIcon_hjNE"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_gyVC"><p><strong>HOW DOES <code>NPM LINK</code> WORK?</strong></p><p>Package linking is a two-step process:</p><ol>
<li>Run <code>npm link</code> inside the package you wish to publish</li>
<li>Run <code>npm link &lt;pkg-name&gt;</code> inside the test package which imports the package.</li>
</ol><p>The first step will create a symlink in the global folder &lt; prefix&gt;/lib/node_modules/&lt; name-of-package&gt; that links to the package where the <code>npm link</code> command was executed.</p><p>The second step will create a symbolic link from globally-installed package-name to node_modules/ of the current folder.</p><div class="theme-admonition theme-admonition-tip admonition_p331 alert alert--success"><div class="admonitionHeading_JzKD"><span class="admonitionIcon_hjNE"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_gyVC"><p>Note that package-name is taken from package.json, not from the directory name.</p></div></div></div></div>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/talkohavy/guides/docs/programming/npm.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_JcqJ" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_lxtX"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/docs/programming/node/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">- Node</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guides/docs/programming/postgres-sql/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">- postgressql</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_qxgX thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#0-tldr" class="table-of-contents__link toc-highlight">0. TLDR</a><ul><li><a href="#--a-init-a-project" class="table-of-contents__link toc-highlight">- A. Init a project</a></li><li><a href="#--b-connect-project-to-github" class="table-of-contents__link toc-highlight">- B. Connect project to GitHub</a></li><li><a href="#--c-add-some-content-to" class="table-of-contents__link toc-highlight">- C. Add some content to</a></li><li><a href="#--d-create-an-npmrc-file" class="table-of-contents__link toc-highlight">- D. Create an .npmrc file</a></li><li><a href="#--e-create-an-npmignore" class="table-of-contents__link toc-highlight">- E. create an .npmignore</a></li><li><a href="#--f-create-a-buildconfigjs-file" class="table-of-contents__link toc-highlight">- F. Create a build.config.js file</a></li><li><a href="#--g-install-changesetscli" class="table-of-contents__link toc-highlight">- G. install Changesets/cli</a></li><li><a href="#--h-edit-your-packagejson" class="table-of-contents__link toc-highlight">- H. Edit your package.json</a></li><li><a href="#--i-your-new-workflow" class="table-of-contents__link toc-highlight">- I. Your new workflow</a></li></ul></li><li><a href="#1-init-a-project-packagejson" class="table-of-contents__link toc-highlight">1. Init a project package.json</a></li><li><a href="#2-connect-project-to-github" class="table-of-contents__link toc-highlight">2. Connect project to GitHub</a></li><li><a href="#3-add-some-content-to-the-package" class="table-of-contents__link toc-highlight">3. Add some content to the Package</a></li><li><a href="#4-develop-a-build-process" class="table-of-contents__link toc-highlight">4. Develop a build process</a></li><li><a href="#5-npm-login-npm-logout-npmrc--npmignore" class="table-of-contents__link toc-highlight">5. npm login, npm logout, .npmrc &amp; .npmignore</a><ul><li><a href="#--a-npm-login--npmrc" class="table-of-contents__link toc-highlight">- A. npm login &amp; .npmrc</a></li><li><a href="#--b-npm-logout" class="table-of-contents__link toc-highlight">- B. npm logout</a></li><li><a href="#--c-npmignore" class="table-of-contents__link toc-highlight">- C. .npmignore</a></li><li><a href="#--d-npm-login-deep-dive" class="table-of-contents__link toc-highlight">- D. npm login Deep Dive</a></li></ul></li><li><a href="#6-versioning" class="table-of-contents__link toc-highlight">6. Versioning</a></li><li><a href="#7-the-role-of-packagejson" class="table-of-contents__link toc-highlight">7. The role of package.json</a><ul><li><a href="#--a-required-keys-within-your-packagejson" class="table-of-contents__link toc-highlight">- A. <strong>REQUIRED</strong> keys within your <code>package.json</code></a></li><li><a href="#--b-important-keys-inside-your-packagejson" class="table-of-contents__link toc-highlight">- B. <strong>IMPORTANT</strong> keys inside your <code>package.json</code></a></li><li><a href="#--c-nice-to-have-keys-inside-your-packagejson" class="table-of-contents__link toc-highlight">- C. <strong>Nice to have</strong> keys inside your <code>package.json</code></a></li></ul></li><li><a href="#8-publishing-a-package-to-an-npm-registry" class="table-of-contents__link toc-highlight">8. Publishing a package to an npm registry</a></li><li><a href="#9-a-publishs-output---deep-dive-strategy" class="table-of-contents__link toc-highlight">9. A publish&#39;s output - Deep Dive Strategy</a><ul><li><a href="#--a-a-second-packagejson" class="table-of-contents__link toc-highlight">- A. A second package.json</a></li><li><a href="#--b-a-readmemd-file" class="table-of-contents__link toc-highlight">- B. A README.md file</a></li><li><a href="#--c-main-types--exports-pointing" class="table-of-contents__link toc-highlight">- C. main, types &amp; exports pointing</a></li><li><a href="#--d-a-complete-build-process" class="table-of-contents__link toc-highlight">- D. A complete build process</a></li><li><a href="#--e-the-publish-command-as-a-script" class="table-of-contents__link toc-highlight">- E. The publish command as a script</a></li></ul></li><li><a href="#10-typescript-types" class="table-of-contents__link toc-highlight">10. Typescript Types</a><ul><li><a href="#--a-emitting-pure-javascript" class="table-of-contents__link toc-highlight">- A. Emitting Pure Javascript</a></li><li><a href="#--b-emitting-js--dts-files" class="table-of-contents__link toc-highlight">- B. Emitting .js &amp; .d.ts files</a></li><li><a href="#--c-using-only-ts-files" class="table-of-contents__link toc-highlight">- C. Using ONLY .ts files</a></li></ul></li><li><a href="#11-auto-completion--auto-suggestion" class="table-of-contents__link toc-highlight">11. Auto-Completion &amp; Auto-Suggestion</a></li><li><a href="#12-versioning-helper---changesetscli" class="table-of-contents__link toc-highlight">12. Versioning Helper - Changesets/cli</a><ul><li><a href="#--a-getting-started" class="table-of-contents__link toc-highlight">- A. Getting Started</a></li><li><a href="#--b-add-new-scripts-to-packagejson" class="table-of-contents__link toc-highlight">- B. Add new scripts to package.json</a></li><li><a href="#--c-add-copy-changeset-to-your-copy-flow" class="table-of-contents__link toc-highlight">- C. Add copy changeset to your copy flow</a></li><li><a href="#--d-versioning-flow---how-to-use" class="table-of-contents__link toc-highlight">- D. Versioning Flow - How to use</a></li></ul></li><li><a href="#13-finalize-process---test--build" class="table-of-contents__link toc-highlight">13. Finalize Process - test &amp; build</a></li><li><a href="#999-check-locally-using-pnpm-link---global" class="table-of-contents__link toc-highlight">999. Check locally using <code>pnpm link --global</code></a><ul><li><a href="#-step-1-run-pnpm-link-on-the-to-be-published-package" class="table-of-contents__link toc-highlight">• Step 1: Run <code>pnpm link</code> on the to-be-published package</a></li><li><a href="#-step-2-run-pnpm-link-pkg-name-on-the-tester-project" class="table-of-contents__link toc-highlight">• Step 2: Run <code>pnpm link pkg-name</code> on the tester project</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/guides/docs/programming/">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_sx_D"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_sx_D"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_sx_D"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/guides/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_sx_D"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>