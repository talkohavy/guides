"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4134],{3905:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},h=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),p=c(a),d=r,m=p["".concat(l,".").concat(d)]||p[d]||u[d]||i;return a?n.createElement(m,o(o({ref:t},h),{},{components:a})):n.createElement(m,o({ref:t},h))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},9684:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const i={sidebar_label:"Design Patterns",sidebar_position:2,sidebar_class_name:"yellow"},o="Design Patterns",s={unversionedId:"programming/design-patterns",id:"programming/design-patterns",title:"Design Patterns",description:"1. Strategy Pattern",source:"@site/docs/programming/design-patterns.md",sourceDirName:"programming",slug:"/programming/design-patterns",permalink:"/guides/he/docs/programming/design-patterns",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/programming/design-patterns.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"Design Patterns",sidebar_position:2,sidebar_class_name:"yellow"},sidebar:"tutorialSidebar",previous:{title:"Kubernetes",permalink:"/guides/he/docs/programming/kubernetes"},next:{title:"Git",permalink:"/guides/he/docs/programming/git"}},l={},c=[{value:"1. Strategy Pattern",id:"1-strategy-pattern",level:2},{value:"- A. The Strategy Pattern&#39;s Goal",id:"--a-the-strategy-patterns-goal",level:3},{value:"- B. Formal Definition",id:"--b-formal-definition",level:3},{value:"- C. The Problem At Hand",id:"--c-the-problem-at-hand",level:3},{value:"- D. The Solution: Composition",id:"--d-the-solution-composition",level:3},{value:"- E. Dependency Injection",id:"--e-dependency-injection",level:3}],h={toc:c},p="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"design-patterns"},"Design Patterns"),(0,r.kt)("h2",{id:"1-strategy-pattern"},"1. Strategy Pattern"),(0,r.kt)("h3",{id:"--a-the-strategy-patterns-goal"},"- A. The Strategy Pattern's Goal"),(0,r.kt)("p",null,"What is the Goal of the Strategy Pattern?",(0,r.kt)("br",{parentName:"p"}),"\n","This is probably the simplest pattern.",(0,r.kt)("br",{parentName:"p"}),"\n","In short, it is about using composition instead of using inheritance.",(0,r.kt)("br",{parentName:"p"}),"\n","It's about understanding that inheritance is NOT intended for code reuse.  "),(0,r.kt)("h3",{id:"--b-formal-definition"},"- B. Formal Definition"),(0,r.kt)("p",null,"The strategy pattern defined a family of algorithms, encapsulates each one, and makes them interchangeable.",(0,r.kt)("br",{parentName:"p"}),"\n","Strategy lets the algorithm vary independently from clients that use it."),(0,r.kt)("h3",{id:"--c-the-problem-at-hand"},"- C. The Problem At Hand"),(0,r.kt)("p",null,"The problem at hand is us having Objects with some shared traits, where each trait can either be exactly the same, or just conceptually the same but with a different implementation.",(0,r.kt)("br",{parentName:"p"}),"\n","Also, each object can have more traits than those common ones."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Why not inheritance?"),"  "),(0,r.kt)("p",null,"The old solution back in the day, when Object Oriented was a huge hype, was with inheritance.",(0,r.kt)("br",{parentName:"p"}),"\n","What is inheritance in a nutshell?",(0,r.kt)("br",{parentName:"p"}),"\n","Consider a Duck class. The Duck class is a super class. The intention is that other classes should inherit from it. Duck has 3 methods on it:  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"quack"),(0,r.kt)("li",{parentName:"ul"},"display"),(0,r.kt)("li",{parentName:"ul"},"fly  ")),(0,r.kt)("p",null,"Let's now consider 2 sub-classes: WildDuck & CityDuck.",(0,r.kt)("br",{parentName:"p"}),"\n","In UML, we have 2 types of arrows:",(0,r.kt)("br",{parentName:"p"}),"\n","is-a === ---D  (this is an inheritance arrow)",(0,r.kt)("br",{parentName:"p"}),"\n","has-a === ---\x3e   (this is a composition arrow)",(0,r.kt)("br",{parentName:"p"}),"\n",'In other words: "A wild duck IS a Duck". "A city duck IS a Duck".',(0,r.kt)("br",{parentName:"p"}),"\n",'The sub-classes of Duck are in charge of implementing their own version of the "display" method. And thus, wild ducks can be displayed differently than city ducks.'),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"}," The problems with inheritance"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("em",{parentName:"p"},"-- Downside 1: Not Resilient to Change"),(0,r.kt)("br",{parentName:"p"}),"\n",'The main problem with it is that sub-classes must inherit ALL of the methods of the parent class, even when it\'s not logical.\nWe said that Duck has a "fly" method.\nNow consider a new sub-class which is called RubberDuck.\nRubber ducks can\'t fly, but CityDuck & WildDuck can.\nIf we were to put the "fly" method on Duck, then RubberDuck would have to inherit it, and implement it. Even if it\'s not logical.\nSo yeah, we could think about this things ahead of time, and design properly, but consider a case where this "fly" method is some change that was offered by our product team later on.\nThis change would break our entire code structure of how we think about Duck.\nSo we are already seeing that inheritance isn\'t great with changes.\nThere IS an ugly solution for this is to force RubberDuck to also implement the "fly" method, and just have it do nothing.'),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"-- Downside 2: Code duplication"),(0,r.kt)("br",{parentName:"p"}),"\n","Horizontal inheritance is not possible. Consider a case where we add 2 new sub-classes (to the already existing sub-classes!): DuckA & DuckB",(0,r.kt)("br",{parentName:"p"}),"\n",'Where they both have a "fly" method, which is exactly the same implementation! The "fly" over at Duck is really just the basic definition, so it can\'t be positioned there. We would need to duplicate the code twice on each of the two classes.',(0,r.kt)("br",{parentName:"p"}),"\n","The ugly, and extremely not feasible solution to this is, we can say that those two classes inherit from let's say a class called FlyingWithTypeA, but you can already see that it's starting to get realllyyyyy complicated.",(0,r.kt)("br",{parentName:"p"}),"\n",'Because consider a case where DuckA & DuckB both has an "eat" method, which are different in implementation, but then DuckB and DuckC has the same "eat" implementation.',(0,r.kt)("br",{parentName:"p"}),"\n","So the problem is, if you image a tree structure, is that inheritance can only be shared downstream the tree. It cannot be shared horizontally.",(0,r.kt)("br",{parentName:"p"}),"\n","That's why composition is often favored over inheritance."),(0,r.kt)("h3",{id:"--d-the-solution-composition"},"- D. The Solution: Composition"),(0,r.kt)("p",null,"After reading the problems with inheritance, let's now think about the definition of the Strategy Pattern again:",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("em",{parentName:"p"},'"The Strategy Pattern defines a family of algorithms, encapsulate each one, and makes them interchangeable. Strategy lets the algorithm vary independently from the clients that use it".'),(0,r.kt)("br",{parentName:"p"}),"\n","That's exactly our problem here!",(0,r.kt)("br",{parentName:"p"}),"\n",'We have an algorithm for "quacking", we have an algorithm for "flying", and what we\'re realizing is that we can\'t create a hierarchical solution in order to share code between these different uses of the different algorithms. so we have to extract the algorithms, and say that each sub-class is actually a "client". A WildDuck is a client. A CityDuck is a client. and they all make use of different algorithms for flying, and quacking, etc.',(0,r.kt)("br",{parentName:"p"}),"\n",'And these methods can vary independently from other aspects of the clients.\nSo what do we do? We create "strategies" for quacking, and "strategies" for flying.\nSo we\'ll create Interfaces. For example: IQuackBehavior.',(0,r.kt)("br",{parentName:"p"}),"\n",'And what it does is it says - you need to have a "quack" method.',(0,r.kt)("br",{parentName:"p"}),"\n","*** Note: there are many ways of approaching this problem that still adhere to the Strategy Pattern, this is just one of them.",(0,r.kt)("br",{parentName:"p"}),"\n",'And then we do the same for "flying".',(0,r.kt)("br",{parentName:"p"}),"\n",'We\'ll create an interfaces IFlyBehavior, that says you need to have a "fly" method.',(0,r.kt)("br",{parentName:"p"}),"\n",'Notice the conceptual change, that now we\'re using a "has-a" relation, instead of a "is-a" relation.',(0,r.kt)("br",{parentName:"p"}),"\n",'Now let\'s consider CityDuck and WildDuck as 2 Clients that should have the a "quack" method, wether it be the same or different.',(0,r.kt)("br",{parentName:"p"}),"\n","How would we achieve that?",(0,r.kt)("br",{parentName:"p"}),"\n","We said that we have an IQuackBehavior interface.",(0,r.kt)("br",{parentName:"p"}),"\n","An interface is not instantiate-able, it needs to have a concretion.",(0,r.kt)("br",{parentName:"p"}),"\n","So we need to create a concretion called SimpleQuackStrategy.",(0,r.kt)("br",{parentName:"p"}),"\n","Now, if those two ducks are the same, they would use that same concretion, and if they're not, we would simply create another concretion, and give it a proper meaningful name.  "),(0,r.kt)("p",null,"\u2022 ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},'The Term "Delegation"')),(0,r.kt)("br",{parentName:"p"}),"\n",'In inheritance, the abstract class Duck had a "quack" method on it.',(0,r.kt)("br",{parentName:"p"}),"\n",'With the Strategy Pattern, the "quack" method delegates to the quack behavior to its concretion. So actually, when we run "quack", we would in fact run the "quack" method on SimpleQuackStrategy.',(0,r.kt)("br",{parentName:"p"}),"\n","This is now possible if my Duck has-an IQuackBehavior, which is concreted through SimpleQuackStrategy.  "),(0,r.kt)("p",null,"\u2022 ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"Why use an interface? Why not just use SimpleQuackStrategy?")),(0,r.kt)("br",{parentName:"p"}),"\n",'Consider a case where Duck points directly to SimpleQuackStrategy, instead of going through IQuackBehavior. Basically just saying "A Duck has-a SimpleQuackBehavior.',(0,r.kt)("br",{parentName:"p"}),"\n","This is a problem, and is really bad, because it is significantly less flexible! This creates class explosions.",(0,r.kt)("br",{parentName:"p"}),"\n",'All we need is to know that it is "quackable", so maybe we\'ll call the interface IQuackable.  '),(0,r.kt)("p",null,"\u2022 ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"How would the composition work?")),(0,r.kt)("br",{parentName:"p"}),"\n",'With the RubberDuck case we could create a concretion called NoQuack for the "quack" method.',(0,r.kt)("br",{parentName:"p"}),"\n","With the DuckA & DuckB case, each of them would use any concretion that it wants, whether it is for IFlyBehavior, or IEatBehavior.",(0,r.kt)("br",{parentName:"p"}),"\n",'Basically what we\'re doing now is we\'re taking the "fly" method from the WildDuck class, and placing it in a concretion outside, as if WildDuck client delegates the "fly" ability over to the concretion.  '),(0,r.kt)("h3",{id:"--e-dependency-injection"},"- E. Dependency Injection"),(0,r.kt)("p",null,"What we haven't talked about is Dependency Injection.",(0,r.kt)("br",{parentName:"p"}),"\n","We sort of glanced over this.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"Dependency Injection")," is only possible IF these behaviors are somehow injected into an instance of a duck, and not hardcoded in the class. if the class hardcodes these things, then we can't do that anymore.",(0,r.kt)("br",{parentName:"p"}),"\n","To make this perfectly clear:  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// *** THIS IS BAD ***\n\nclass Duck {\n  IFlyBehavior fb = new SomeParticularFlyBehavior();\n  IQuackBehavior qb;\n  IDisplayBehavior db;\n}\n")),(0,r.kt)("p",null,"If we did this, if we were to hardcode the dependancy, it wouldn't be as flexible. It would put me back in a state where I need multiple classes to represent all of these different types of Ducks. Think about it, it is significantly less composable.",(0,r.kt)("br",{parentName:"p"}),"\n","We need to somehow inject the behavior.  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// *** THIS IS GOOD ***\n\nclass Duck {\n  IFlyBehavior fb;\n  IQuackBehavior qb;\n  IDisplayBehavior db;\n\n  constrcutor({ fb, qb, db }){\n    this.fb = fb;\n    this.qb = qb;\n    this.db = db;\n  }\n}\n")),(0,r.kt)("p",null,"The key here is to use the constructor injection.",(0,r.kt)("br",{parentName:"p"}),"\n",'And now think about how the "fly" method on that class would look like:  '),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"public void fly(){\n  this.fb.fly()\n}\n")),(0,r.kt)("p",null,"So you pass in the behavior, and then you execute that behavior within the class."),(0,r.kt)("admonition",{title:"My tip",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Use this awesome feature option")),(0,r.kt)("admonition",{title:"Take care",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"This action is dangerous")))}u.isMDXComponent=!0}}]);