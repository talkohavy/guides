"use strict";(self.webpackChunkdocusaurus_guides=self.webpackChunkdocusaurus_guides||[]).push([[3510],{7213:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"programming/socket-io/acknowledgements","title":"Acknowledgements","description":"Introduction","source":"@site/docs/programming/socket-io/acknowledgements.md","sourceDirName":"programming/socket-io","slug":"/programming/socket-io/acknowledgements","permalink":"/guides/he/docs/programming/socket-io/acknowledgements","draft":false,"unlisted":false,"editUrl":"https://github.com/talkohavy/guides/docs/programming/socket-io/acknowledgements.md","tags":[],"version":"current","frontMatter":{},"sidebar":"mySidebar","previous":{"title":"- Broadcasting","permalink":"/guides/he/docs/programming/socket-io/broadcasting"},"next":{"title":"- Handle Disconnects","permalink":"/guides/he/docs/programming/socket-io/handle-disconnects"}}');var r=o(5813),s=o(3546);const c={},l="Acknowledgements",i={},a=[{value:"Introduction",id:"introduction",level:2},{value:"Type 1: With a callback",id:"type-1-with-a-callback",level:2},{value:"From client to server",id:"from-client-to-server",level:3},{value:"From server to client",id:"from-server-to-client",level:3},{value:"Type 2: With a promise",id:"type-2-with-a-promise",level:3},{value:"From client to server",id:"from-client-to-server-1",level:3},{value:"From server to client",id:"from-server-to-client-1",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"acknowledgements",children:"Acknowledgements"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"Acknowledgements comes in two flavors:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"With a callback function"}),"\n",(0,r.jsx)(n.li,{children:"With a Promise"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"type-1-with-a-callback",children:"Type 1: With a callback"}),"\n",(0,r.jsx)(n.h3,{id:"from-client-to-server",children:"From client to server"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Client"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"socket.timeout(5000).emit('request', { foo: 'bar' }, 'baz', (err, response) => {\n  if (err) {\n    // the server did not acknowledge the event in the given delay\n  } else {\n    console.log(response.status); // 'ok'\n  }\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Server"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"io.on('connection', (socket) => {\n  socket.on('request', (arg1, arg2, callback) => {\n    console.log(arg1); // { foo: 'bar' }\n    console.log(arg2); // 'baz'\n    callback({\n      status: 'ok'\n    });\n  });\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"from-server-to-client",children:"From server to client"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Server"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"io.on('connection', (socket) => {\n  socket.timeout(5000).emit('request', { foo: 'bar' }, 'baz', (err, response) => {\n    if (err) {\n      // the client did not acknowledge the event in the given delay\n    } else {\n      console.log(response.status); // 'ok'\n    }\n  });\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Client"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"socket.on('request', (arg1, arg2, callback) => {\n  console.log(arg1); // { foo: 'bar' }\n  console.log(arg2); // 'baz'\n  callback({\n    status: 'ok'\n  });\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"type-2-with-a-promise",children:"Type 2: With a promise"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"emitWithAck()"})," method provides the same functionality, but returns a Promise which will resolve once the other side acknowledges the event:"]}),"\n",(0,r.jsx)(n.h3,{id:"from-client-to-server-1",children:"From client to server"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Client"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"try {\n  const response = await socket.timeout(5000).emitWithAck('request', { foo: 'bar' }, 'baz');\n  console.log(response.status); // 'ok'\n} catch (e) {\n  // the server did not acknowledge the event in the given delay\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Server"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"io.on('connection', (socket) => {\n  socket.on('request', (arg1, arg2, callback) => {\n    console.log(arg1); // { foo: 'bar' }\n    console.log(arg2); // 'baz'\n    callback({\n      status: 'ok'\n    });\n  });\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"from-server-to-client-1",children:"From server to client"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Server"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"io.on('connection', async (socket) => {\n  try {\n    const response = await socket.timeout(5000).emitWithAck('request', { foo: 'bar' }, 'baz');\n    console.log(response.status); // 'ok'\n  } catch (e) {\n    // the client did not acknowledge the event in the given delay\n  }\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Client"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"socket.on('request', (arg1, arg2, callback) => {\n  console.log(arg1); // { foo: 'bar' }\n  console.log(arg2); // 'baz'\n  callback({\n    status: 'ok'\n  });\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},3546:(e,n,o)=>{o.d(n,{R:()=>c,x:()=>l});var t=o(9729);const r={},s=t.createContext(r);function c(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);