"use strict";(self.webpackChunkdocusaurus_guides=self.webpackChunkdocusaurus_guides||[]).push([[220],{5219:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var t=s(1527),n=s(7252);const o={sidebar_label:"2.1. ffmpeg",sidebar_position:1},r="FFMPEG",a={id:"programming/video-editing/ffmpeg",title:"FFMPEG",description:"1. Compress Video (H.265)",source:"@site/docs/programming/video-editing/ffmpeg.md",sourceDirName:"programming/video-editing",slug:"/programming/video-editing/ffmpeg",permalink:"/guides/he/docs/programming/video-editing/ffmpeg",draft:!1,unlisted:!1,editUrl:"https://github.com/talkohavy/guides/docs/programming/video-editing/ffmpeg.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"2.1. ffmpeg",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"2. Video Editing",permalink:"/guides/he/docs/video-edit"},next:{title:"3. Crypto",permalink:"/guides/he/docs/programming/crypto"}},l={},c=[{value:"1. Compress Video (H.265)",id:"1-compress-video-h265",level:2},{value:"Possible Flags:",id:"possible-flags",level:3},{value:"\u2022 Option 1: Video Encoding (flag -c)",id:"-option-1-video-encoding-flag--c",level:4},{value:"\u2022 Option 2: Preset (flag -preset)",id:"-option-2-preset-flag--preset",level:4},{value:"\u2022 Option 3: Constant Rate Factor (flag -crf)",id:"-option-3-constant-rate-factor-flag--crf",level:4},{value:"\u2022 Option 4: Tune (flag -tune)",id:"-option-4-tune-flag--tune",level:4},{value:"\u2022 Option 5: Filters (flag -vf)",id:"-option-5-filters-flag--vf",level:4},{value:"\u2022 Option 6: Strict (flag -strict)",id:"-option-6-strict-flag--strict",level:4},{value:"\u2022 Option 7: Format (flag -f)",id:"-option-7-format-flag--f",level:4},{value:"2. Trim Video",id:"2-trim-video",level:2}];function d(e){const i={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,n.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h1,{id:"ffmpeg",children:"FFMPEG"}),"\n",(0,t.jsx)(i.h2,{id:"1-compress-video-h265",children:"1. Compress Video (H.265)"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:'ffmpeg -i aaa.mp4 -c:v libx265 -preset slow -crf 28 -vf "scale=trunc(iw/2)*2:trunc(ih/2)*2" output.mkv\n'})}),"\n",(0,t.jsx)(i.p,{children:"The default -crf value is 28, which is parallel to x263 23. Choose the highest value which still provides an acceptable quality for you."}),"\n",(0,t.jsx)(i.h3,{id:"possible-flags",children:"Possible Flags:"}),"\n",(0,t.jsxs)(i.h4,{id:"-option-1-video-encoding-flag--c",children:["\u2022 Option 1: Video Encoding (flag -c",":v",")"]}),"\n",(0,t.jsx)(i.p,{children:"Leave it as-is. This is what activates the H.265 encoding."}),"\n",(0,t.jsx)(i.h4,{id:"-option-2-preset-flag--preset",children:"\u2022 Option 2: Preset (flag -preset)"}),"\n",(0,t.jsxs)(i.p,{children:["Defaults to ",(0,t.jsx)(i.code,{children:"medium"}),".",(0,t.jsx)(i.br,{}),"\n","Options are: ",(0,t.jsx)(i.code,{children:"ultrafast"})," | ",(0,t.jsx)(i.code,{children:"superfast"})," | ",(0,t.jsx)(i.code,{children:"veryfast"})," | ",(0,t.jsx)(i.code,{children:"faster"})," | ",(0,t.jsx)(i.code,{children:"medium"})," | ",(0,t.jsx)(i.code,{children:"slow"})," | ",(0,t.jsx)(i.code,{children:"slower"})," | ",(0,t.jsx)(i.code,{children:"veryslow"})]}),"\n",(0,t.jsx)(i.p,{children:"Use the slowest preset you have patience for, with a crf that is acceptable, given that preset."}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.code,{children:"ultrafast"}),": This preset provides the fastest encoding speed with the lowest compression efficiency. It's suitable for quick previews or when encoding speed is prioritized over output quality."]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.code,{children:"superfast"}),": This preset offers faster encoding speed compared to ",(0,t.jsx)(i.code,{children:"ultrafast"})," with slightly better compression efficiency. It's suitable for situations where speed is important but some compromise on quality is acceptable."]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.code,{children:"veryfast"}),": This preset provides a good balance between encoding speed and output quality. It's suitable for general-purpose encoding where moderate compression efficiency is desired without sacrificing too much speed."]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.code,{children:"faster"}),", ",(0,t.jsx)(i.code,{children:"fast"}),", ",(0,t.jsx)(i.code,{children:"medium"}),", ",(0,t.jsx)(i.code,{children:"slow"}),", ",(0,t.jsx)(i.code,{children:"slower"}),": These presets offer progressively slower encoding speeds with increasing compression efficiency and output quality. medium is often a good balance for general-purpose encoding."]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.code,{children:"veryslow"}),": This preset offers the highest compression efficiency and best output quality but at the expense of significantly slower encoding speed. It's suitable for situations where output quality is paramount and encoding time is not a concern."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["Different presets balance encoding ",(0,t.jsx)(i.em,{children:"speed"})," and ",(0,t.jsx)(i.em,{children:"output quality"}),", with faster presets sacrificing quality for speed and slower presets providing better compression efficiency and higher quality output. Here are some common options for the -preset option:"]}),"\n",(0,t.jsx)(i.h4,{id:"-option-3-constant-rate-factor-flag--crf",children:"\u2022 Option 3: Constant Rate Factor (flag -crf)"}),"\n",(0,t.jsx)(i.p,{children:"Use this mode if you want to retain good visual quality and don't care about the exact bitrate or filesize of the encoded file. The mode works exactly the same as in x264, except that maximum value is always 51, even with 10-bit support, so please read the H.264 guide for more info."}),"\n",(0,t.jsx)(i.p,{children:"As with x264, you need to make several choices:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Choose a CRF. CRF affects the quality. The default is 28, and it should visually correspond to libx264 video at CRF 23, but result in about half the file size. CRF works just like in x264, so choose the highest value that provides an acceptable quality."}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:["Choose a preset. The default is medium. The preset determines compression options and efficiency and therefore affects encoding speed and size. Valid presets are ",(0,t.jsx)(i.code,{children:"ultrafast"}),", ",(0,t.jsx)(i.code,{children:"superfast"}),", ",(0,t.jsx)(i.code,{children:"veryfast"}),", ",(0,t.jsx)(i.code,{children:"faster"}),", ",(0,t.jsx)(i.code,{children:"fast"}),", ",(0,t.jsx)(i.code,{children:"medium"}),", ",(0,t.jsx)(i.code,{children:"slow"}),", ",(0,t.jsx)(i.code,{children:"slower"}),", ",(0,t.jsx)(i.code,{children:"veryslow"}),", and ",(0,t.jsx)(i.code,{children:"placebo"}),'. Use the slowest preset you have patience for, with a crf that is acceptable, given that preset. Ignore placebo as it provides insignificant returns for a significant increase in encoding time. Note that CRF values are different based on which preset you select, a "slower" preset generates more compression/bit, but may increase filesize. If you compare "ultrafast" with "veryslow" at the same CRF value, "veryslow" may generate a larger file, with overall better compression. So for instance if -preset ultrafast with -crf 15 generates a file with comparable size to "veryslow" -crf 20, the veryslow preset file will have better quality for the same file size. You can also specify a bitrate for a preset (see below), instead of crf, for controlling file size with a certain compression level.']}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Choose a tune (optional). By default, this is disabled, and it is generally not required to set a tune option. x265 supports the following ",(0,t.jsx)(i.code,{children:"-tune"})," options: ",(0,t.jsx)(i.code,{children:"psnr"}),", ",(0,t.jsx)(i.code,{children:"ssim"}),", ",(0,t.jsx)(i.code,{children:"grain"}),", ",(0,t.jsx)(i.code,{children:"zerolatency"}),", ",(0,t.jsx)(i.code,{children:"fastdecode"}),". They are explained in the H.264 guide."]}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"-option-4-tune-flag--tune",children:"\u2022 Option 4: Tune (flag -tune)"}),"\n",(0,t.jsx)(i.p,{children:"You can optionally use -tune to change settings based upon the specifics of your input. Current tunings include:"}),"\n",(0,t.jsx)(i.p,{children:"film \u2013 use for high quality movie content; lowers deblocking\nanimation \u2013 good for cartoons; uses higher deblocking and more reference frames\ngrain \u2013 preserves the grain structure in old, grainy film material\nstillimage \u2013 good for slideshow-like content\nfastdecode \u2013 allows faster decoding by disabling certain filters\nzerolatency \u2013 good for fast encoding and low-latency streaming"}),"\n",(0,t.jsx)(i.p,{children:"For example, if your input is animation then use the animation tuning, or if you want to preserve grain in a film then use the grain tuning. If you are unsure of what to use or your input does not match any of tunings then omit the -tune option. You can see a list of current tunings with -tune help, and what settings they apply with x264 --fullhelp."}),"\n",(0,t.jsx)(i.h4,{id:"-option-5-filters-flag--vf",children:"\u2022 Option 5: Filters (flag -vf)"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:'-vf "scale=trunc(iw/2)*2:trunc(ih/2)*2\n'})}),"\n",(0,t.jsx)(i.h4,{id:"-option-6-strict-flag--strict",children:"\u2022 Option 6: Strict (flag -strict)"}),"\n",(0,t.jsx)(i.p,{children:"-strict strict"}),"\n",(0,t.jsx)(i.h4,{id:"-option-7-format-flag--f",children:"\u2022 Option 7: Format (flag -f)"}),"\n",(0,t.jsxs)(i.p,{children:["Options are: ",(0,t.jsx)(i.code,{children:"matroska"})," | ",(0,t.jsx)(i.code,{children:"mp4"})]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"2-trim-video",children:"2. Trim Video"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash"})})]})}function h(e={}){const{wrapper:i}={...(0,n.a)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},7252:(e,i,s)=>{s.d(i,{Z:()=>a,a:()=>r});var t=s(959);const n={},o=t.createContext(n);function r(e){const i=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),t.createElement(o.Provider,{value:i},e.children)}}}]);